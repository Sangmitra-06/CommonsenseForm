{"ast":null,"code":"export const loadQuestionsData=async()=>{try{console.log('Loading questions from public/questions.json...');const response=await fetch('/questions.json');if(!response.ok){throw new Error(\"Failed to load questions: \".concat(response.status,\" \").concat(response.statusText));}const data=await response.json();// Validate the data structure\nif(!Array.isArray(data)||data.length===0){throw new Error('Questions data is not in the expected format');}// Calculate totals for logging\nconst totalQuestions=data.reduce((sum,cat)=>sum+cat.subcategories.reduce((subSum,sub)=>subSum+sub.topics.reduce((topicSum,topic)=>topicSum+topic.questions.length,0),0),0);console.log('Questions loaded successfully:',{categories:data.length,totalSubcategories:data.reduce((sum,cat)=>sum+cat.subcategories.length,0),totalTopics:data.reduce((sum,cat)=>sum+cat.subcategories.reduce((subSum,sub)=>subSum+sub.topics.length,0),0),totalQuestions});return data;}catch(error){console.error('Error loading questions data:',error);throw new Error('Failed to load questions data');}};export const validateAnswer=answer=>{if(!answer||answer.trim().length===0){return{isValid:false,message:'Please provide an answer or specify \"none\" if no answer exists'};}if(answer.trim().length<4){return{isValid:false,message:'Please provide a more detailed answer (at least 4 characters) or specify \"none\"'};}if(answer.length>5000){return{isValid:false,message:'Answer is too long (maximum 5000 characters)'};}return{isValid:true};};// UPDATED: Changed from 15 to 7 questions\nexport const shouldShowAttentionCheck=questionCount=>{// Show attention check at questions 7, 14, 21, 28, etc.\n// But not at 0 (start of survey)\nconsole.log('Checking if should show attention check:',{questionCount,isDivisibleBy7:questionCount>0&&questionCount%7===0,result:questionCount>0&&questionCount%7===0});return questionCount>0&&questionCount%7===0;};// Comprehensive quality analysis\nexport const analyzeResponseQuality=answer=>{const issues=[];let score=100;let isNoneResponse=false;let isGibberish=false;const text=answer.toLowerCase().trim();// Check for \"none\" type responses\nconst nonePatterns=[/^(none|n\\/a|na|nothing|no|idk|i don't know|dk|dunno)$/i,/^(none that i know|nothing that i know|no idea|not sure|dont know|don't know)$/i,/^(same|similar|normal|usual|regular|typical|standard|common)$/i,/^(not applicable|not available|no information|no data)$/i];nonePatterns.forEach(pattern=>{if(pattern.test(text)){isNoneResponse=true;issues.push('Generic \"none\" or non-informative response');score-=40;}});// Check for gibberish patterns\nconst gibberishPatterns=[/^[bcdfghjklmnpqrstvwxyz]{6,}$/i,// Too many consonants\n/^[aeiou]{6,}$/i,// Too many vowels\n/(.{3,})\\1{2,}/,// Repeated patterns (abcabc)\n/^[^a-z\\s]*$/i,// No letters at all\n/^[a-z]{8,}$/i// Long strings without spaces\n];// Keyboard mashing patterns\nconst mashingPatterns=[/qwerty|asdf|zxcv|hjkl|yuiop/i,/abcd|1234|test|xxx|yyy|zzz/i,/(.)\\1{4,}/// Same character repeated 5+ times\n];gibberishPatterns.forEach(pattern=>{if(pattern.test(text)){isGibberish=true;issues.push('Appears to be random characters or gibberish');score-=60;}});mashingPatterns.forEach(pattern=>{if(pattern.test(text)){isGibberish=true;issues.push('Keyboard mashing or test input detected');score-=50;}});// Check for excessive repetition of words\nconst words=text.split(/\\s+/).filter(word=>word.length>2);const wordCount={};words.forEach(word=>{wordCount[word]=(wordCount[word]||0)+1;});const repeatedWords=Object.entries(wordCount).filter(_ref=>{let[word,count]=_ref;return count>3;});if(repeatedWords.length>0){issues.push('Excessive word repetition');score-=30;}// Check for lack of specificity\nconst vaguePhrases=['something','things','stuff','anything','everything'];const vagueCount=vaguePhrases.reduce((count,phrase)=>count+(text.match(new RegExp(\"\\\\b\".concat(phrase,\"\\\\b\"),'g'))||[]).length,0);if(vagueCount>3){issues.push('Response lacks specific details');score-=15;}// Positive indicators\nconst positiveIndicators=[/\\b(example|for instance|specifically|traditionally|commonly|usually|typically)\\b/i,/\\b(in my region|in our area|locally|here we|we usually|in our culture)\\b/i,/\\b(such as|like|including|consists of|involves|includes)\\b/i];let positiveCount=0;positiveIndicators.forEach(pattern=>{if(pattern.test(text))positiveCount++;});if(positiveCount>0){score+=Math.min(positiveCount*8,20);}score=Math.max(0,Math.min(100,score));return{isLowQuality:score<30,issues,score,isNoneResponse,isGibberish};};// FIXED: Comprehensive pattern analysis\n// Comprehensive pattern analysis\nexport const analyzeUserPattern=responses=>{const warnings=[];let suspiciousPattern=false;if(responses.length<5){return{suspiciousPattern,warnings,noneResponseRate:0,gibberishResponseRate:0,fastResponseRate:0,issueType:null};}// Analyze response patterns\nlet noneCount=0;let gibberishCount=0;let fastResponseCount=0;responses.forEach(response=>{const analysis=analyzeResponseQuality(response.answer);if(analysis.isNoneResponse)noneCount++;if(analysis.isGibberish)gibberishCount++;// FIXED: Check for responses that are TOO FAST (less than 8 seconds)\n// Previously this was checking if timeSpent < 8, which is correct\n// But make sure we're getting actual time values\nconsole.log('Response time check:',{answer:response.answer.substring(0,20)+'...',timeSpent:response.timeSpent,isFast:response.timeSpent<8});if(response.timeSpent<8)fastResponseCount++;});const noneResponseRate=noneCount/responses.length*100;const gibberishResponseRate=gibberishCount/responses.length*100;const fastResponseRate=fastResponseCount/responses.length*100;console.log('Pattern analysis results:',{totalResponses:responses.length,noneCount,gibberishCount,fastResponseCount,noneResponseRate:noneResponseRate.toFixed(1),gibberishResponseRate:gibberishResponseRate.toFixed(1),fastResponseRate:fastResponseRate.toFixed(1)});let issueCount=0;let primaryIssue=null;// Check for problematic patterns (30% threshold for all)\nif(noneResponseRate>=30){warnings.push(\"High rate of \\\"none\\\" responses (\".concat(noneResponseRate.toFixed(1),\"%)\"));suspiciousPattern=true;issueCount++;if(!primaryIssue)primaryIssue='none';}if(gibberishResponseRate>=30){warnings.push(\"High rate of gibberish responses (\".concat(gibberishResponseRate.toFixed(1),\"%)\"));suspiciousPattern=true;issueCount++;if(!primaryIssue)primaryIssue='gibberish';}// FIXED: Make sure this is checking for responses that are TOO FAST\nif(fastResponseRate>=30){warnings.push(\"High rate of very quick responses (\".concat(fastResponseRate.toFixed(1),\"% completed in under 8 seconds)\"));suspiciousPattern=true;issueCount++;if(!primaryIssue)primaryIssue='speed';console.log('Fast response pattern detected:',{fastResponseRate:fastResponseRate.toFixed(1),threshold:'30%',fastResponseCount,totalResponses:responses.length});}// Check for similar responses\nconst answers=responses.map(r=>r.answer.toLowerCase().trim());const uniqueAnswers=new Set(answers);if(uniqueAnswers.size<answers.length*0.6){warnings.push('Many similar or identical responses');suspiciousPattern=true;issueCount++;if(!primaryIssue)primaryIssue='repetition';}// Check for overall quality decline\nconst recentResponses=responses.slice(-5);const recentQualityScores=recentResponses.map(r=>analyzeResponseQuality(r.answer).score);const avgRecentQuality=recentQualityScores.reduce((sum,score)=>sum+score,0)/recentQualityScores.length;if(avgRecentQuality<25){warnings.push('Overall response quality is very low');suspiciousPattern=true;issueCount++;if(!primaryIssue)primaryIssue='quality';}// Set issue type based on count\nconst issueType=issueCount>1?'multiple':primaryIssue;console.log('Final pattern analysis:',{suspiciousPattern,warnings,issueType,primaryIssue});return{suspiciousPattern,warnings,noneResponseRate,gibberishResponseRate,fastResponseRate,issueType};};// Enhanced attention check questions\nexport const generateAttentionCheck=(currentCategory,currentTopic,userInfo)=>{const checks=[{question:\"What category of cultural practices are you currently answering questions about? Please write the name of the main category.\",correctAnswer:currentCategory.toLowerCase(),type:'context'},{question:\"What specific cultural topic are you currently focused on within \".concat(currentCategory,\"? Please write the name of the current topic.\"),correctAnswer:currentTopic.toLowerCase(),type:'context'},{question:'This survey is about cultural practices in which country? Please write the name of the country.',correctAnswer:'india',type:'basic'},{question:'How many regions of India were you asked to choose from when you started this survey? Please write the number.',correctAnswer:'five',type:'basic'},{question:'What should you write if you are not familiar with a cultural practice mentioned in a question? Please write the word you should use.',correctAnswer:'none',type:'instruction'},{question:'This survey focuses on cultural practices and traditions. What type of knowledge should you base your answers on? Please write \"personal\" if you should use your personal knowledge, or \"internet\" if you should look things up online.',correctAnswer:'personal',type:'instruction'}];// Add personal verification if userInfo available\nif(userInfo){checks.push({question:\"What region of India did you specify at the beginning of this survey? Please write the name of the region (North, South, East, West, or Central).\",correctAnswer:userInfo.region.toLowerCase(),type:'personal'});}const randomCheck=checks[Math.floor(Math.random()*checks.length)];return{question:randomCheck.question,options:[randomCheck.correctAnswer],// Keep for compatibility but not used\ncorrectAnswer:0,// Keep for compatibility but not used\nexpectedAnswer:randomCheck.correctAnswer,// New field for text matching\ncurrentTopic,currentCategory,type:randomCheck.type};};// Utility functions\nexport const generateQuestionId=(categoryIndex,subcategoryIndex,topicIndex,questionIndex)=>{return\"\".concat(categoryIndex,\"-\").concat(subcategoryIndex,\"-\").concat(topicIndex,\"-\").concat(questionIndex);};export const formatTime=seconds=>{const mins=Math.floor(seconds/60);const secs=seconds%60;return\"\".concat(mins,\":\").concat(secs.toString().padStart(2,'0'));};export const debounce=(func,wait)=>{let timeout;return function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}clearTimeout(timeout);timeout=setTimeout(()=>func.apply(null,args),wait);};};export const getEstimatedTimeRemaining=function(totalQuestions,completedQuestions){let averageTimePerQuestion=arguments.length>2&&arguments[2]!==undefined?arguments[2]:120;const remainingQuestions=totalQuestions-completedQuestions;const estimatedSeconds=remainingQuestions*averageTimePerQuestion;if(estimatedSeconds<3600){const minutes=Math.ceil(estimatedSeconds/60);return\"~\".concat(minutes,\" minute\").concat(minutes!==1?'s':'',\" remaining\");}else{const hours=Math.ceil(estimatedSeconds/3600);return\"~\".concat(hours,\" hour\").concat(hours!==1?'s':'',\" remaining\");}};","map":{"version":3,"names":["loadQuestionsData","console","log","response","fetch","ok","Error","concat","status","statusText","data","json","Array","isArray","length","totalQuestions","reduce","sum","cat","subcategories","subSum","sub","topics","topicSum","topic","questions","categories","totalSubcategories","totalTopics","error","validateAnswer","answer","trim","isValid","message","shouldShowAttentionCheck","questionCount","isDivisibleBy7","result","analyzeResponseQuality","issues","score","isNoneResponse","isGibberish","text","toLowerCase","nonePatterns","forEach","pattern","test","push","gibberishPatterns","mashingPatterns","words","split","filter","word","wordCount","repeatedWords","Object","entries","_ref","count","vaguePhrases","vagueCount","phrase","match","RegExp","positiveIndicators","positiveCount","Math","min","max","isLowQuality","analyzeUserPattern","responses","warnings","suspiciousPattern","noneResponseRate","gibberishResponseRate","fastResponseRate","issueType","noneCount","gibberishCount","fastResponseCount","analysis","substring","timeSpent","isFast","totalResponses","toFixed","issueCount","primaryIssue","threshold","answers","map","r","uniqueAnswers","Set","size","recentResponses","slice","recentQualityScores","avgRecentQuality","generateAttentionCheck","currentCategory","currentTopic","userInfo","checks","question","correctAnswer","type","region","randomCheck","floor","random","options","expectedAnswer","generateQuestionId","categoryIndex","subcategoryIndex","topicIndex","questionIndex","formatTime","seconds","mins","secs","toString","padStart","debounce","func","wait","timeout","_len","arguments","args","_key","clearTimeout","setTimeout","apply","getEstimatedTimeRemaining","completedQuestions","averageTimePerQuestion","undefined","remainingQuestions","estimatedSeconds","minutes","ceil","hours"],"sources":["C:/Users/sangm/OneDrive - Brock University/CommonsenseForm/client/src/utils/helpers.ts"],"sourcesContent":["import { Category, AttentionCheck } from '../types/index.ts';\r\n\r\nexport const loadQuestionsData = async (): Promise<Category[]> => {\r\n  try {\r\n    console.log('Loading questions from public/questions.json...');\r\n    \r\n    const response = await fetch('/questions.json');\r\n    \r\n    if (!response.ok) {\r\n      throw new Error(`Failed to load questions: ${response.status} ${response.statusText}`);\r\n    }\r\n    \r\n    const data: Category[] = await response.json();\r\n    \r\n    // Validate the data structure\r\n    if (!Array.isArray(data) || data.length === 0) {\r\n      throw new Error('Questions data is not in the expected format');\r\n    }\r\n    \r\n    // Calculate totals for logging\r\n    const totalQuestions = data.reduce((sum, cat) => \r\n      sum + cat.subcategories.reduce((subSum, sub) => \r\n        subSum + sub.topics.reduce((topicSum, topic) => topicSum + topic.questions.length, 0), 0), 0);\r\n    \r\n    console.log('Questions loaded successfully:', {\r\n      categories: data.length,\r\n      totalSubcategories: data.reduce((sum, cat) => sum + cat.subcategories.length, 0),\r\n      totalTopics: data.reduce((sum, cat) => \r\n        sum + cat.subcategories.reduce((subSum, sub) => subSum + sub.topics.length, 0), 0),\r\n      totalQuestions\r\n    });\r\n    \r\n    return data;\r\n    \r\n  } catch (error) {\r\n    console.error('Error loading questions data:', error);\r\n    throw new Error('Failed to load questions data');\r\n  }\r\n};\r\n\r\nexport const validateAnswer = (answer: string): { isValid: boolean; message?: string } => {\r\n  if (!answer || answer.trim().length === 0) {\r\n    return { isValid: false, message: 'Please provide an answer or specify \"none\" if no answer exists' };\r\n  }\r\n  \r\n  if (answer.trim().length < 4) {\r\n    return { isValid: false, message: 'Please provide a more detailed answer (at least 4 characters) or specify \"none\"' };\r\n  }\r\n  \r\n  if (answer.length > 5000) {\r\n    return { isValid: false, message: 'Answer is too long (maximum 5000 characters)' };\r\n  }\r\n  \r\n  return { isValid: true };\r\n};\r\n\r\n// UPDATED: Changed from 15 to 7 questions\r\nexport const shouldShowAttentionCheck = (questionCount: number): boolean => {\r\n  // Show attention check at questions 7, 14, 21, 28, etc.\r\n  // But not at 0 (start of survey)\r\n  console.log('Checking if should show attention check:', {\r\n    questionCount,\r\n    isDivisibleBy7: questionCount > 0 && questionCount % 7 === 0,\r\n    result: questionCount > 0 && questionCount % 7 === 0\r\n  });\r\n  \r\n  return questionCount > 0 && questionCount % 7 === 0;\r\n};\r\n\r\n\r\n\r\n// Comprehensive quality analysis\r\nexport const analyzeResponseQuality = (answer: string): {\r\n  isLowQuality: boolean;\r\n  issues: string[];\r\n  score: number;\r\n  isNoneResponse: boolean;\r\n  isGibberish: boolean;\r\n} => {\r\n  const issues: string[] = [];\r\n  let score = 100;\r\n  let isNoneResponse = false;\r\n  let isGibberish = false;\r\n\r\n  const text = answer.toLowerCase().trim();\r\n  \r\n  // Check for \"none\" type responses\r\n  const nonePatterns = [\r\n    /^(none|n\\/a|na|nothing|no|idk|i don't know|dk|dunno)$/i,\r\n    /^(none that i know|nothing that i know|no idea|not sure|dont know|don't know)$/i,\r\n    /^(same|similar|normal|usual|regular|typical|standard|common)$/i,\r\n    /^(not applicable|not available|no information|no data)$/i,\r\n  ];\r\n\r\n  nonePatterns.forEach(pattern => {\r\n    if (pattern.test(text)) {\r\n      isNoneResponse = true;\r\n      issues.push('Generic \"none\" or non-informative response');\r\n      score -= 40;\r\n    }\r\n  });\r\n\r\n  // Check for gibberish patterns\r\n  const gibberishPatterns = [\r\n    /^[bcdfghjklmnpqrstvwxyz]{6,}$/i, // Too many consonants\r\n    /^[aeiou]{6,}$/i, // Too many vowels\r\n    /(.{3,})\\1{2,}/, // Repeated patterns (abcabc)\r\n    /^[^a-z\\s]*$/i, // No letters at all\r\n    /^[a-z]{8,}$/i, // Long strings without spaces\r\n  ];\r\n\r\n  // Keyboard mashing patterns\r\n  const mashingPatterns = [\r\n    /qwerty|asdf|zxcv|hjkl|yuiop/i,\r\n    /abcd|1234|test|xxx|yyy|zzz/i,\r\n    /(.)\\1{4,}/, // Same character repeated 5+ times\r\n  ];\r\n\r\n  gibberishPatterns.forEach(pattern => {\r\n    if (pattern.test(text)) {\r\n      isGibberish = true;\r\n      issues.push('Appears to be random characters or gibberish');\r\n      score -= 60;\r\n    }\r\n  });\r\n\r\n  mashingPatterns.forEach(pattern => {\r\n    if (pattern.test(text)) {\r\n      isGibberish = true;\r\n      issues.push('Keyboard mashing or test input detected');\r\n      score -= 50;\r\n    }\r\n  });\r\n\r\n  // Check for excessive repetition of words\r\n  const words = text.split(/\\s+/).filter(word => word.length > 2);\r\n  const wordCount = {};\r\n  words.forEach(word => {\r\n    wordCount[word] = (wordCount[word] || 0) + 1;\r\n  });\r\n\r\n  const repeatedWords = Object.entries(wordCount).filter(([word, count]) => (count as number) > 3);\r\n  if (repeatedWords.length > 0) {\r\n    issues.push('Excessive word repetition');\r\n    score -= 30;\r\n  }\r\n\r\n  // Check for lack of specificity\r\n  const vaguePhrases = ['something', 'things', 'stuff', 'anything', 'everything'];\r\n  const vagueCount = vaguePhrases.reduce((count, phrase) => \r\n    count + (text.match(new RegExp(`\\\\b${phrase}\\\\b`, 'g')) || []).length, 0\r\n  );\r\n  \r\n  if (vagueCount > 3) {\r\n    issues.push('Response lacks specific details');\r\n    score -= 15;\r\n  }\r\n\r\n  // Positive indicators\r\n  const positiveIndicators = [\r\n    /\\b(example|for instance|specifically|traditionally|commonly|usually|typically)\\b/i,\r\n    /\\b(in my region|in our area|locally|here we|we usually|in our culture)\\b/i,\r\n    /\\b(such as|like|including|consists of|involves|includes)\\b/i,\r\n  ];\r\n\r\n  let positiveCount = 0;\r\n  positiveIndicators.forEach(pattern => {\r\n    if (pattern.test(text)) positiveCount++;\r\n  });\r\n\r\n  if (positiveCount > 0) {\r\n    score += Math.min(positiveCount * 8, 20);\r\n  }\r\n\r\n  score = Math.max(0, Math.min(100, score));\r\n  \r\n  return {\r\n    isLowQuality: score < 30,\r\n    issues,\r\n    score,\r\n    isNoneResponse,\r\n    isGibberish\r\n  };\r\n};\r\n\r\n// FIXED: Comprehensive pattern analysis\r\n// Comprehensive pattern analysis\r\nexport const analyzeUserPattern = (responses: Array<{answer: string, timeSpent: number}>): {\r\n  suspiciousPattern: boolean;\r\n  warnings: string[];\r\n  noneResponseRate: number;\r\n  gibberishResponseRate: number;\r\n  fastResponseRate: number;\r\n  issueType: string | null;\r\n} => {\r\n  const warnings: string[] = [];\r\n  let suspiciousPattern = false;\r\n\r\n  if (responses.length < 5) {\r\n    return { \r\n      suspiciousPattern, \r\n      warnings, \r\n      noneResponseRate: 0,\r\n      gibberishResponseRate: 0,\r\n      fastResponseRate: 0,\r\n      issueType: null\r\n    };\r\n  }\r\n\r\n  // Analyze response patterns\r\n  let noneCount = 0;\r\n  let gibberishCount = 0;\r\n  let fastResponseCount = 0;\r\n\r\n  responses.forEach(response => {\r\n    const analysis = analyzeResponseQuality(response.answer);\r\n    \r\n    if (analysis.isNoneResponse) noneCount++;\r\n    if (analysis.isGibberish) gibberishCount++;\r\n    \r\n    // FIXED: Check for responses that are TOO FAST (less than 8 seconds)\r\n    // Previously this was checking if timeSpent < 8, which is correct\r\n    // But make sure we're getting actual time values\r\n    console.log('Response time check:', {\r\n      answer: response.answer.substring(0, 20) + '...',\r\n      timeSpent: response.timeSpent,\r\n      isFast: response.timeSpent < 8\r\n    });\r\n    \r\n    if (response.timeSpent < 8) fastResponseCount++;\r\n  });\r\n\r\n  const noneResponseRate = (noneCount / responses.length) * 100;\r\n  const gibberishResponseRate = (gibberishCount / responses.length) * 100;\r\n  const fastResponseRate = (fastResponseCount / responses.length) * 100;\r\n\r\n  console.log('Pattern analysis results:', {\r\n    totalResponses: responses.length,\r\n    noneCount,\r\n    gibberishCount,\r\n    fastResponseCount,\r\n    noneResponseRate: noneResponseRate.toFixed(1),\r\n    gibberishResponseRate: gibberishResponseRate.toFixed(1),\r\n    fastResponseRate: fastResponseRate.toFixed(1)\r\n  });\r\n\r\n  let issueCount = 0;\r\n  let primaryIssue: string | null = null;\r\n\r\n  // Check for problematic patterns (30% threshold for all)\r\n  if (noneResponseRate >= 30) {\r\n    warnings.push(`High rate of \"none\" responses (${noneResponseRate.toFixed(1)}%)`);\r\n    suspiciousPattern = true;\r\n    issueCount++;\r\n    if (!primaryIssue) primaryIssue = 'none';\r\n  }\r\n\r\n  if (gibberishResponseRate >= 30) {\r\n    warnings.push(`High rate of gibberish responses (${gibberishResponseRate.toFixed(1)}%)`);\r\n    suspiciousPattern = true;\r\n    issueCount++;\r\n    if (!primaryIssue) primaryIssue = 'gibberish';\r\n  }\r\n\r\n  // FIXED: Make sure this is checking for responses that are TOO FAST\r\n  if (fastResponseRate >= 30) {\r\n    warnings.push(`High rate of very quick responses (${fastResponseRate.toFixed(1)}% completed in under 8 seconds)`);\r\n    suspiciousPattern = true;\r\n    issueCount++;\r\n    if (!primaryIssue) primaryIssue = 'speed';\r\n    \r\n    console.log('Fast response pattern detected:', {\r\n      fastResponseRate: fastResponseRate.toFixed(1),\r\n      threshold: '30%',\r\n      fastResponseCount,\r\n      totalResponses: responses.length\r\n    });\r\n  }\r\n\r\n  // Check for similar responses\r\n  const answers = responses.map(r => r.answer.toLowerCase().trim());\r\n  const uniqueAnswers = new Set(answers);\r\n  if (uniqueAnswers.size < answers.length * 0.6) {\r\n    warnings.push('Many similar or identical responses');\r\n    suspiciousPattern = true;\r\n    issueCount++;\r\n    if (!primaryIssue) primaryIssue = 'repetition';\r\n  }\r\n\r\n  // Check for overall quality decline\r\n  const recentResponses = responses.slice(-5);\r\n  const recentQualityScores = recentResponses.map(r => analyzeResponseQuality(r.answer).score);\r\n  const avgRecentQuality = recentQualityScores.reduce((sum, score) => sum + score, 0) / recentQualityScores.length;\r\n  \r\n  if (avgRecentQuality < 25) {\r\n    warnings.push('Overall response quality is very low');\r\n    suspiciousPattern = true;\r\n    issueCount++;\r\n    if (!primaryIssue) primaryIssue = 'quality';\r\n  }\r\n\r\n  // Set issue type based on count\r\n  const issueType = issueCount > 1 ? 'multiple' : primaryIssue;\r\n\r\n  console.log('Final pattern analysis:', {\r\n    suspiciousPattern,\r\n    warnings,\r\n    issueType,\r\n    primaryIssue\r\n  });\r\n\r\n  return { \r\n    suspiciousPattern, \r\n    warnings, \r\n    noneResponseRate,\r\n    gibberishResponseRate,\r\n    fastResponseRate,\r\n    issueType\r\n  };\r\n};\r\n\r\n// Enhanced attention check questions\r\nexport const generateAttentionCheck = (\r\n  currentCategory: string,\r\n  currentTopic: string,\r\n  userInfo?: { region: string; age: number }\r\n): AttentionCheck => {\r\n  const checks = [\r\n    {\r\n      question: `What category of cultural practices are you currently answering questions about? Please write the name of the main category.`,\r\n      correctAnswer: currentCategory.toLowerCase(),\r\n      type: 'context'\r\n    },\r\n    {\r\n      question: `What specific cultural topic are you currently focused on within ${currentCategory}? Please write the name of the current topic.`,\r\n      correctAnswer: currentTopic.toLowerCase(),\r\n      type: 'context'\r\n    },\r\n    {\r\n      question: 'This survey is about cultural practices in which country? Please write the name of the country.',\r\n      correctAnswer: 'india',\r\n      type: 'basic'\r\n    },\r\n    {\r\n      question: 'How many regions of India were you asked to choose from when you started this survey? Please write the number.',\r\n      correctAnswer: 'five',\r\n      type: 'basic'\r\n    },\r\n    {\r\n      question: 'What should you write if you are not familiar with a cultural practice mentioned in a question? Please write the word you should use.',\r\n      correctAnswer: 'none',\r\n      type: 'instruction'\r\n    },\r\n    {\r\n      question: 'This survey focuses on cultural practices and traditions. What type of knowledge should you base your answers on? Please write \"personal\" if you should use your personal knowledge, or \"internet\" if you should look things up online.',\r\n      correctAnswer: 'personal',\r\n      type: 'instruction'\r\n    }\r\n  ];\r\n\r\n  // Add personal verification if userInfo available\r\n  if (userInfo) {\r\n    checks.push({\r\n      question: `What region of India did you specify at the beginning of this survey? Please write the name of the region (North, South, East, West, or Central).`,\r\n      correctAnswer: userInfo.region.toLowerCase(),\r\n      type: 'personal'\r\n    });\r\n  }\r\n  \r\n  const randomCheck = checks[Math.floor(Math.random() * checks.length)];\r\n  \r\n  return {\r\n    question: randomCheck.question,\r\n    options: [randomCheck.correctAnswer], // Keep for compatibility but not used\r\n    correctAnswer: 0, // Keep for compatibility but not used\r\n    expectedAnswer: randomCheck.correctAnswer, // New field for text matching\r\n    currentTopic,\r\n    currentCategory,\r\n    type: randomCheck.type\r\n  };\r\n};\r\n\r\n// Utility functions\r\nexport const generateQuestionId = (\r\n  categoryIndex: number,\r\n  subcategoryIndex: number,\r\n  topicIndex: number,\r\n  questionIndex: number\r\n): string => {\r\n  return `${categoryIndex}-${subcategoryIndex}-${topicIndex}-${questionIndex}`;\r\n};\r\n\r\nexport const formatTime = (seconds: number): string => {\r\n  const mins = Math.floor(seconds / 60);\r\n  const secs = seconds % 60;\r\n  return `${mins}:${secs.toString().padStart(2, '0')}`;\r\n};\r\n\r\nexport const debounce = <T extends (...args: any[]) => any>(\r\n  func: T,\r\n  wait: number\r\n): ((...args: Parameters<T>) => void) => {\r\n  let timeout: ReturnType<typeof setTimeout>;\r\n  \r\n  return (...args: Parameters<T>) => {\r\n    clearTimeout(timeout);\r\n    timeout = setTimeout(() => func.apply(null, args), wait);\r\n  };\r\n};\r\n\r\nexport const getEstimatedTimeRemaining = (\r\n  totalQuestions: number,\r\n  completedQuestions: number,\r\n  averageTimePerQuestion: number = 120\r\n): string => {\r\n  const remainingQuestions = totalQuestions - completedQuestions;\r\n  const estimatedSeconds = remainingQuestions * averageTimePerQuestion;\r\n  \r\n  if (estimatedSeconds < 3600) {\r\n    const minutes = Math.ceil(estimatedSeconds / 60);\r\n    return `~${minutes} minute${minutes !== 1 ? 's' : ''} remaining`;\r\n  } else {\r\n    const hours = Math.ceil(estimatedSeconds / 3600);\r\n    return `~${hours} hour${hours !== 1 ? 's' : ''} remaining`;\r\n  }\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}