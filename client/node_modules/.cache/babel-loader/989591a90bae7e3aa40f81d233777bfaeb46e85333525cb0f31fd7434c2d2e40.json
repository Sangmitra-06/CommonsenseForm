{"ast":null,"code":"import React,{useState,useEffect}from'react';import{FormProvider,useForm}from'./context/FormContext.tsx';import IntroductionWelcome from'./components/IntroductionWelcome.tsx';import IntroductionStructure from'./components/IntroductionStructure.tsx';import UserInfo from'./components/UserInfo.tsx';import QuestionForm from'./components/QuestionForm.tsx';import CompletionPage from'./components/CompletionPage.tsx';import SurveyExpired from'./components/SurveyExpired.tsx';import'./App.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function AppContent(){const{state,createUserSession,loadUserSession}=useForm();const[currentStage,setCurrentStage]=useState('welcome');const[isInitializing,setIsInitializing]=useState(true);const[hasCheckedSession,setHasCheckedSession]=useState(false);const[hasExistingSession,setHasExistingSession]=useState(false);const[existingSessionId,setExistingSessionId]=useState(null);// Wait for questions data to load\nuseEffect(()=>{if(state.questionsData.length>0&&!hasCheckedSession&&!state.isLoading){const checkExistingSession=async()=>{console.log('App: Checking for existing session...');const savedSessionId=localStorage.getItem('culturalSurveySessionId');if(savedSessionId){try{const response=await fetch(\"http://localhost:5000/api/users/\".concat(savedSessionId));if(response.ok){const userData=await response.json();console.log('App: Found existing session');if(userData.isCompleted){localStorage.removeItem('culturalSurveySessionId');localStorage.removeItem('culturalSurveyStartTime');setHasExistingSession(false);}else{// Check if session has expired\nconst savedStartTime=localStorage.getItem('culturalSurveyStartTime');if(savedStartTime){const elapsed=Date.now()-parseInt(savedStartTime);const timeLimit=15*60*1000;// 15 minutes\nif(elapsed>=timeLimit){console.log('Existing session has expired');localStorage.removeItem('culturalSurveySessionId');localStorage.removeItem('culturalSurveyStartTime');setHasExistingSession(false);}else{setHasExistingSession(true);setExistingSessionId(savedSessionId);}}else{// No start time found, treat as expired\nlocalStorage.removeItem('culturalSurveySessionId');setHasExistingSession(false);}}}else{localStorage.removeItem('culturalSurveySessionId');localStorage.removeItem('culturalSurveyStartTime');setHasExistingSession(false);}}catch(error){console.error('Error checking existing session:',error);localStorage.removeItem('culturalSurveySessionId');localStorage.removeItem('culturalSurveyStartTime');setHasExistingSession(false);}}setHasCheckedSession(true);setIsInitializing(false);};checkExistingSession();}},[state.questionsData.length,state.isLoading,hasCheckedSession]);// Add this useEffect to handle page reloads\nuseEffect(()=>{const handleBeforeUnload=e=>{// Show warning if survey is in progress\nif(state.sessionId&&!state.isCompleted&&!state.surveyExpired){e.preventDefault();e.returnValue='Your survey progress will be lost. Are you sure you want to leave?';return'Your survey progress will be lost. Are you sure you want to leave?';}};const handleUnload=()=>{// Clear session data on page unload\nif(state.sessionId&&!state.isCompleted){localStorage.removeItem('culturalSurveySessionId');localStorage.removeItem('culturalSurveyStartTime');}};window.addEventListener('beforeunload',handleBeforeUnload);window.addEventListener('unload',handleUnload);return()=>{window.removeEventListener('beforeunload',handleBeforeUnload);window.removeEventListener('unload',handleUnload);};},[state.sessionId,state.isCompleted,state.surveyExpired]);// Modified session checking logic\nuseEffect(()=>{if(state.questionsData.length>0&&!hasCheckedSession&&!state.isLoading){const checkExistingSession=async()=>{console.log('App: Checking for existing session...');const savedSessionId=localStorage.getItem('culturalSurveySessionId');const savedStartTime=localStorage.getItem('culturalSurveyStartTime');// For one-sitting surveys, always clear old sessions\nif(savedSessionId||savedStartTime){console.log('App: Clearing previous session (one-sitting requirement)');localStorage.removeItem('culturalSurveySessionId');localStorage.removeItem('culturalSurveyStartTime');setHasExistingSession(false);}setHasCheckedSession(true);setIsInitializing(false);};checkExistingSession();}},[state.questionsData.length,state.isLoading,hasCheckedSession]);// Update stage based on form state\nuseEffect(()=>{if(!hasCheckedSession)return;if(state.surveyExpired){setCurrentStage('expired');}else if(state.isCompleted){setCurrentStage('completed');}else if(state.sessionId&&state.userInfo){setCurrentStage('questions');}},[state.surveyExpired,state.isCompleted,state.sessionId,state.userInfo,hasCheckedSession]);const handleWelcomeContinue=()=>{setCurrentStage('structure');};const handleStartNewSurvey=()=>{if(hasExistingSession){localStorage.removeItem('culturalSurveySessionId');localStorage.removeItem('culturalSurveyStartTime');setHasExistingSession(false);setExistingSessionId(null);}setCurrentStage('userInfo');};const handleResumeSurvey=async()=>{if(existingSessionId){try{console.log('Resuming survey with session:',existingSessionId);await loadUserSession(existingSessionId);setCurrentStage('questions');}catch(error){console.error('Failed to resume session:',error);localStorage.removeItem('culturalSurveySessionId');localStorage.removeItem('culturalSurveyStartTime');setHasExistingSession(false);setExistingSessionId(null);alert('Unable to resume previous session. Starting fresh.');setCurrentStage('userInfo');}}};const handleUserInfoSubmit=async userInfo=>{try{await createUserSession(userInfo);setCurrentStage('questions');}catch(error){console.error('Failed to create user session:',error);}};if(isInitializing||state.questionsData.length===0){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-100 flex items-center justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:state.questionsData.length===0?'Loading survey questions...':'Checking for existing survey...'}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-500 mt-2\",children:[\"Questions loaded: \",state.questionsData.length,\" categories\"]})]})});}if(state.error){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-red-50 flex items-center justify-center p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-md mx-auto bg-white rounded-lg shadow-lg p-6 text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-red-600 text-4xl mb-4\",children:\"\\u26A0\\uFE0F\"}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold text-red-800 mb-2\",children:\"Error\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-red-600 mb-4\",children:state.error}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>window.location.reload(),className:\"bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded\",children:\"Reload Page\"})]})});}switch(currentStage){case'welcome':return/*#__PURE__*/_jsx(IntroductionWelcome,{onContinue:handleWelcomeContinue});case'structure':return/*#__PURE__*/_jsx(IntroductionStructure,{onStartNew:handleStartNewSurvey,onResume:handleResumeSurvey,hasExistingSession:hasExistingSession});case'userInfo':return/*#__PURE__*/_jsx(UserInfo,{onSubmit:handleUserInfoSubmit,isLoading:state.isLoading});case'questions':return/*#__PURE__*/_jsx(QuestionForm,{});case'completed':return/*#__PURE__*/_jsx(CompletionPage,{});case'expired':return/*#__PURE__*/_jsx(SurveyExpired,{});default:return/*#__PURE__*/_jsx(IntroductionWelcome,{onContinue:handleWelcomeContinue});}}function App(){return/*#__PURE__*/_jsx(FormProvider,{children:/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsx(AppContent,{})})});}export default App;","map":{"version":3,"names":["React","useState","useEffect","FormProvider","useForm","IntroductionWelcome","IntroductionStructure","UserInfo","QuestionForm","CompletionPage","SurveyExpired","jsx","_jsx","jsxs","_jsxs","AppContent","state","createUserSession","loadUserSession","currentStage","setCurrentStage","isInitializing","setIsInitializing","hasCheckedSession","setHasCheckedSession","hasExistingSession","setHasExistingSession","existingSessionId","setExistingSessionId","questionsData","length","isLoading","checkExistingSession","console","log","savedSessionId","localStorage","getItem","response","fetch","concat","ok","userData","json","isCompleted","removeItem","savedStartTime","elapsed","Date","now","parseInt","timeLimit","error","handleBeforeUnload","e","sessionId","surveyExpired","preventDefault","returnValue","handleUnload","window","addEventListener","removeEventListener","userInfo","handleWelcomeContinue","handleStartNewSurvey","handleResumeSurvey","alert","handleUserInfoSubmit","className","children","onClick","location","reload","onContinue","onStartNew","onResume","onSubmit","App"],"sources":["C:/Users/sangm/OneDrive - Brock University/CommonsenseForm/client/src/App.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { FormProvider, useForm } from './context/FormContext.tsx';\r\nimport IntroductionWelcome from './components/IntroductionWelcome.tsx';\r\nimport IntroductionStructure from './components/IntroductionStructure.tsx';\r\nimport UserInfo from './components/UserInfo.tsx';\r\nimport QuestionForm from './components/QuestionForm.tsx';\r\nimport CompletionPage from './components/CompletionPage.tsx';\r\nimport SurveyExpired from './components/SurveyExpired.tsx';\r\nimport './App.css';\r\n\r\ntype AppStage = 'welcome' | 'structure' | 'userInfo' | 'questions' | 'completed' | 'expired';\r\n\r\nfunction AppContent() {\r\n  const { state, createUserSession, loadUserSession } = useForm();\r\n  const [currentStage, setCurrentStage] = useState<AppStage>('welcome');\r\n  const [isInitializing, setIsInitializing] = useState(true);\r\n  const [hasCheckedSession, setHasCheckedSession] = useState(false);\r\n  const [hasExistingSession, setHasExistingSession] = useState(false);\r\n  const [existingSessionId, setExistingSessionId] = useState<string | null>(null);\r\n\r\n  // Wait for questions data to load\r\n  useEffect(() => {\r\n    if (state.questionsData.length > 0 && !hasCheckedSession && !state.isLoading) {\r\n      const checkExistingSession = async () => {\r\n        console.log('App: Checking for existing session...');\r\n        const savedSessionId = localStorage.getItem('culturalSurveySessionId');\r\n        \r\n        if (savedSessionId) {\r\n          try {\r\n            const response = await fetch(`http://localhost:5000/api/users/${savedSessionId}`);\r\n            if (response.ok) {\r\n              const userData = await response.json();\r\n              console.log('App: Found existing session');\r\n              \r\n              if (userData.isCompleted) {\r\n                localStorage.removeItem('culturalSurveySessionId');\r\n                localStorage.removeItem('culturalSurveyStartTime');\r\n                setHasExistingSession(false);\r\n              } else {\r\n                // Check if session has expired\r\n                const savedStartTime = localStorage.getItem('culturalSurveyStartTime');\r\n                if (savedStartTime) {\r\n                  const elapsed = Date.now() - parseInt(savedStartTime);\r\n                  const timeLimit = 15 * 60 * 1000; // 15 minutes\r\n                  \r\n                  if (elapsed >= timeLimit) {\r\n                    console.log('Existing session has expired');\r\n                    localStorage.removeItem('culturalSurveySessionId');\r\n                    localStorage.removeItem('culturalSurveyStartTime');\r\n                    setHasExistingSession(false);\r\n                  } else {\r\n                    setHasExistingSession(true);\r\n                    setExistingSessionId(savedSessionId);\r\n                  }\r\n                } else {\r\n                  // No start time found, treat as expired\r\n                  localStorage.removeItem('culturalSurveySessionId');\r\n                  setHasExistingSession(false);\r\n                }\r\n              }\r\n            } else {\r\n              localStorage.removeItem('culturalSurveySessionId');\r\n              localStorage.removeItem('culturalSurveyStartTime');\r\n              setHasExistingSession(false);\r\n            }\r\n          } catch (error) {\r\n            console.error('Error checking existing session:', error);\r\n            localStorage.removeItem('culturalSurveySessionId');\r\n            localStorage.removeItem('culturalSurveyStartTime');\r\n            setHasExistingSession(false);\r\n          }\r\n        }\r\n        \r\n        setHasCheckedSession(true);\r\n        setIsInitializing(false);\r\n      };\r\n\r\n      checkExistingSession();\r\n    }\r\n  }, [state.questionsData.length, state.isLoading, hasCheckedSession]);\r\n\r\n  // Add this useEffect to handle page reloads\r\n  useEffect(() => {\r\n    const handleBeforeUnload = (e: BeforeUnloadEvent) => {\r\n      // Show warning if survey is in progress\r\n      if (state.sessionId && !state.isCompleted && !state.surveyExpired) {\r\n        e.preventDefault();\r\n        e.returnValue = 'Your survey progress will be lost. Are you sure you want to leave?';\r\n        return 'Your survey progress will be lost. Are you sure you want to leave?';\r\n      }\r\n    };\r\n\r\n    const handleUnload = () => {\r\n      // Clear session data on page unload\r\n      if (state.sessionId && !state.isCompleted) {\r\n        localStorage.removeItem('culturalSurveySessionId');\r\n        localStorage.removeItem('culturalSurveyStartTime');\r\n      }\r\n    };\r\n\r\n    window.addEventListener('beforeunload', handleBeforeUnload);\r\n    window.addEventListener('unload', handleUnload);\r\n\r\n    return () => {\r\n      window.removeEventListener('beforeunload', handleBeforeUnload);\r\n      window.removeEventListener('unload', handleUnload);\r\n    };\r\n  }, [state.sessionId, state.isCompleted, state.surveyExpired]);\r\n\r\n  // Modified session checking logic\r\n  useEffect(() => {\r\n    if (state.questionsData.length > 0 && !hasCheckedSession && !state.isLoading) {\r\n      const checkExistingSession = async () => {\r\n        console.log('App: Checking for existing session...');\r\n        const savedSessionId = localStorage.getItem('culturalSurveySessionId');\r\n        const savedStartTime = localStorage.getItem('culturalSurveyStartTime');\r\n        \r\n        // For one-sitting surveys, always clear old sessions\r\n        if (savedSessionId || savedStartTime) {\r\n          console.log('App: Clearing previous session (one-sitting requirement)');\r\n          localStorage.removeItem('culturalSurveySessionId');\r\n          localStorage.removeItem('culturalSurveyStartTime');\r\n          setHasExistingSession(false);\r\n        }\r\n        \r\n        setHasCheckedSession(true);\r\n        setIsInitializing(false);\r\n      };\r\n\r\n      checkExistingSession();\r\n    }\r\n  }, [state.questionsData.length, state.isLoading, hasCheckedSession]);\r\n\r\n  // Update stage based on form state\r\n  useEffect(() => {\r\n    if (!hasCheckedSession) return;\r\n    \r\n    if (state.surveyExpired) {\r\n      setCurrentStage('expired');\r\n    } else if (state.isCompleted) {\r\n      setCurrentStage('completed');\r\n    } else if (state.sessionId && state.userInfo) {\r\n      setCurrentStage('questions');\r\n    }\r\n  }, [state.surveyExpired, state.isCompleted, state.sessionId, state.userInfo, hasCheckedSession]);\r\n\r\n  const handleWelcomeContinue = () => {\r\n    setCurrentStage('structure');\r\n  };\r\n\r\n  const handleStartNewSurvey = () => {\r\n    if (hasExistingSession) {\r\n      localStorage.removeItem('culturalSurveySessionId');\r\n      localStorage.removeItem('culturalSurveyStartTime');\r\n      setHasExistingSession(false);\r\n      setExistingSessionId(null);\r\n    }\r\n    setCurrentStage('userInfo');\r\n  };\r\n\r\n  const handleResumeSurvey = async () => {\r\n    if (existingSessionId) {\r\n      try {\r\n        console.log('Resuming survey with session:', existingSessionId);\r\n        await loadUserSession(existingSessionId);\r\n        setCurrentStage('questions');\r\n      } catch (error) {\r\n        console.error('Failed to resume session:', error);\r\n        localStorage.removeItem('culturalSurveySessionId');\r\n        localStorage.removeItem('culturalSurveyStartTime');\r\n        setHasExistingSession(false);\r\n        setExistingSessionId(null);\r\n        alert('Unable to resume previous session. Starting fresh.');\r\n        setCurrentStage('userInfo');\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleUserInfoSubmit = async (userInfo: any) => {\r\n    try {\r\n      await createUserSession(userInfo);\r\n      setCurrentStage('questions');\r\n    } catch (error) {\r\n      console.error('Failed to create user session:', error);\r\n    }\r\n  };\r\n\r\n  if (isInitializing || state.questionsData.length === 0) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gray-100 flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4\"></div>\r\n          <p className=\"text-gray-600\">\r\n            {state.questionsData.length === 0 ? 'Loading survey questions...' : 'Checking for existing survey...'}\r\n          </p>\r\n          <p className=\"text-sm text-gray-500 mt-2\">\r\n            Questions loaded: {state.questionsData.length} categories\r\n          </p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (state.error) {\r\n    return (\r\n      <div className=\"min-h-screen bg-red-50 flex items-center justify-center p-4\">\r\n        <div className=\"max-w-md mx-auto bg-white rounded-lg shadow-lg p-6 text-center\">\r\n          <div className=\"text-red-600 text-4xl mb-4\">⚠️</div>\r\n          <h2 className=\"text-xl font-bold text-red-800 mb-2\">Error</h2>\r\n          <p className=\"text-red-600 mb-4\">{state.error}</p>\r\n          <button\r\n            onClick={() => window.location.reload()}\r\n            className=\"bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded\"\r\n          >\r\n            Reload Page\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  switch (currentStage) {\r\n    case 'welcome':\r\n      return <IntroductionWelcome onContinue={handleWelcomeContinue} />;\r\n    case 'structure':\r\n      return (\r\n        <IntroductionStructure \r\n          onStartNew={handleStartNewSurvey}\r\n          onResume={handleResumeSurvey}\r\n          hasExistingSession={hasExistingSession}\r\n        />\r\n      );\r\n    case 'userInfo':\r\n      return <UserInfo onSubmit={handleUserInfoSubmit} isLoading={state.isLoading} />;\r\n    case 'questions':\r\n      return <QuestionForm />;\r\n    case 'completed':\r\n      return <CompletionPage />;\r\n    case 'expired':\r\n      return <SurveyExpired />;\r\n    default:\r\n      return <IntroductionWelcome onContinue={handleWelcomeContinue} />;\r\n  }\r\n}\r\n\r\nfunction App() {\r\n  return (\r\n    <FormProvider>\r\n      <div className=\"App\">\r\n        <AppContent />\r\n      </div>\r\n    </FormProvider>\r\n  );\r\n}\r\n\r\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}