{"ast":null,"code":"import React,{useState,useEffect}from'react';import{FormProvider,useForm}from'./context/FormContext.tsx';import ConsentForm from'./components/ConsentForm.tsx';import ConsentDeclined from'./components/ConsentDeclines.tsx';import IntroductionWelcome from'./components/IntroductionWelcome.tsx';import IntroductionStructure from'./components/IntroductionStructure.tsx';import UserInfo from'./components/UserInfo.tsx';import QuestionForm from'./components/QuestionForm.tsx';import CompletionPage from'./components/CompletionPage.tsx';import SurveyExpired from'./components/SurveyExpired.tsx';import AIWarningModal from'./components/AIWarningModal.tsx';import'./App.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function AppContent(){const{state,createUserSession,loadUserSession}=useForm();const[currentStage,setCurrentStage]=useState('consent');const[isInitializing,setIsInitializing]=useState(true);const[hasCheckedSession,setHasCheckedSession]=useState(false);const[hasExistingSession,setHasExistingSession]=useState(false);const[existingSessionId,setExistingSessionId]=useState(null);const[showAIWarning,setShowAIWarning]=useState(false);// NEW: Control modal visibility\nconst[pendingUserInfo,setPendingUserInfo]=useState(null);// Store userInfo temporarily\n// NEW: Check for attention check failure\nuseEffect(()=>{if(state.attentionCheckFailed){setCurrentStage('attentionFailed');}},[state.attentionCheckFailed]);// Wait for questions data to load\nuseEffect(()=>{if(state.questionsData.length>0&&!hasCheckedSession&&!state.isLoading){const checkExistingSession=async()=>{console.log('App: Checking for existing session...');// For one-sitting surveys, always clear old sessions\nconst savedSessionId=localStorage.getItem('culturalSurveySessionId');const savedStartTime=localStorage.getItem('culturalSurveyStartTime');if(savedSessionId||savedStartTime){console.log('App: Clearing previous session (one-sitting requirement)');localStorage.removeItem('culturalSurveySessionId');localStorage.removeItem('culturalSurveyStartTime');setHasExistingSession(false);}setHasCheckedSession(true);setIsInitializing(false);};checkExistingSession();}},[state.questionsData.length,state.isLoading,hasCheckedSession]);// Add this useEffect to handle page reloads\nuseEffect(()=>{const handleBeforeUnload=e=>{// Show warning if survey is in progress\nif(state.sessionId&&!state.isCompleted&&!state.surveyExpired&&!state.attentionCheckFailed){e.preventDefault();e.returnValue='Your survey progress will be lost. Are you sure you want to leave?';return'Your survey progress will be lost. Are you sure you want to leave?';}};const handleUnload=()=>{// Clear session data on page unload\nif(state.sessionId&&!state.isCompleted){localStorage.removeItem('culturalSurveySessionId');localStorage.removeItem('culturalSurveyStartTime');}};window.addEventListener('beforeunload',handleBeforeUnload);window.addEventListener('unload',handleUnload);return()=>{window.removeEventListener('beforeunload',handleBeforeUnload);window.removeEventListener('unload',handleUnload);};},[state.sessionId,state.isCompleted,state.surveyExpired,state.attentionCheckFailed]);// Update stage based on form state\nuseEffect(()=>{if(!hasCheckedSession)return;if(state.attentionCheckFailed){setCurrentStage('attentionFailed');}else if(state.surveyExpired){setCurrentStage('expired');}else if(state.isCompleted){setCurrentStage('completed');}else if(state.sessionId&&state.userInfo&&!showAIWarning){setCurrentStage('questions');}},[state.attentionCheckFailed,state.surveyExpired,state.isCompleted,state.sessionId,state.userInfo,hasCheckedSession,showAIWarning]);// Consent handlers\nconst handleConsent=()=>{setCurrentStage('welcome');};const handleDeclineConsent=()=>{setCurrentStage('declined');};const handleWelcomeContinue=()=>{setCurrentStage('structure');};const handleStartNewSurvey=()=>{if(hasExistingSession){localStorage.removeItem('culturalSurveySessionId');localStorage.removeItem('culturalSurveyStartTime');setHasExistingSession(false);setExistingSessionId(null);}setCurrentStage('userInfo');};const handleResumeSurvey=async()=>{if(existingSessionId){try{console.log('Resuming survey with session:',existingSessionId);await loadUserSession(existingSessionId);setCurrentStage('questions');}catch(error){console.error('Failed to resume session:',error);localStorage.removeItem('culturalSurveySessionId');localStorage.removeItem('culturalSurveyStartTime');setHasExistingSession(false);setExistingSessionId(null);alert('Unable to resume previous session. Starting fresh.');setCurrentStage('userInfo');}}};const handleUserInfoSubmit=async userInfo=>{// Store userInfo and show AI warning modal\nsetPendingUserInfo(userInfo);setShowAIWarning(true);};const handleAIWarningAccept=async()=>{// Hide modal and create session\nsetShowAIWarning(false);try{await createUserSession(pendingUserInfo);setCurrentStage('questions');}catch(error){console.error('Failed to create user session:',error);}};// Show consent form immediately, don't wait for initialization if on consent stage\nif(currentStage==='consent'){return/*#__PURE__*/_jsx(ConsentForm,{onConsent:handleConsent,onDecline:handleDeclineConsent});}// Show declined page immediately\nif(currentStage==='declined'){return/*#__PURE__*/_jsx(ConsentDeclined,{});}if(isInitializing||state.questionsData.length===0){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-100 flex items-center justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:state.questionsData.length===0?'Loading survey questions...':'Checking for existing survey...'}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-500 mt-2\",children:[\"Questions loaded: \",state.questionsData.length,\" categories\"]})]})});}if(state.error){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-red-50 flex items-center justify-center p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-md mx-auto bg-white rounded-lg shadow-lg p-6 text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-red-600 text-4xl mb-4\",children:\"\\u26A0\\uFE0F\"}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold text-red-800 mb-2\",children:\"Error\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-red-600 mb-4\",children:state.error}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>window.location.reload(),className:\"bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded\",children:\"Reload Page\"})]})});}if(state.attentionCheckFailed){return/*#__PURE__*/_jsx(CompletionPage,{isAttentionCheckFailure:true});}switch(currentStage){case'welcome':return/*#__PURE__*/_jsx(IntroductionWelcome,{onContinue:handleWelcomeContinue});case'structure':return/*#__PURE__*/_jsx(IntroductionStructure,{onStartNew:handleStartNewSurvey,onResume:handleResumeSurvey,hasExistingSession:hasExistingSession});case'userInfo':return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(UserInfo,{onSubmit:handleUserInfoSubmit,isLoading:state.isLoading}),showAIWarning&&/*#__PURE__*/_jsx(AIWarningModal,{onAccept:handleAIWarningAccept})]});case'questions':return/*#__PURE__*/_jsx(QuestionForm,{});case'completed':return/*#__PURE__*/_jsx(CompletionPage,{});case'attentionFailed':return/*#__PURE__*/_jsx(CompletionPage,{isAttentionCheckFailure:true});case'expired':return/*#__PURE__*/_jsx(SurveyExpired,{});default:return/*#__PURE__*/_jsx(ConsentForm,{onConsent:handleConsent,onDecline:handleDeclineConsent});}}function App(){return/*#__PURE__*/_jsx(FormProvider,{children:/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsx(AppContent,{})})});}export default App;","map":{"version":3,"names":["React","useState","useEffect","FormProvider","useForm","ConsentForm","ConsentDeclined","IntroductionWelcome","IntroductionStructure","UserInfo","QuestionForm","CompletionPage","SurveyExpired","AIWarningModal","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","AppContent","state","createUserSession","loadUserSession","currentStage","setCurrentStage","isInitializing","setIsInitializing","hasCheckedSession","setHasCheckedSession","hasExistingSession","setHasExistingSession","existingSessionId","setExistingSessionId","showAIWarning","setShowAIWarning","pendingUserInfo","setPendingUserInfo","attentionCheckFailed","questionsData","length","isLoading","checkExistingSession","console","log","savedSessionId","localStorage","getItem","savedStartTime","removeItem","handleBeforeUnload","e","sessionId","isCompleted","surveyExpired","preventDefault","returnValue","handleUnload","window","addEventListener","removeEventListener","userInfo","handleConsent","handleDeclineConsent","handleWelcomeContinue","handleStartNewSurvey","handleResumeSurvey","error","alert","handleUserInfoSubmit","handleAIWarningAccept","onConsent","onDecline","className","children","onClick","location","reload","isAttentionCheckFailure","onContinue","onStartNew","onResume","onSubmit","onAccept","App"],"sources":["C:/Users/sangm/OneDrive - Brock University/CommonsenseForm/client/src/App.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { FormProvider, useForm } from './context/FormContext.tsx';\r\nimport ConsentForm from './components/ConsentForm.tsx';\r\nimport ConsentDeclined from './components/ConsentDeclines.tsx';\r\nimport IntroductionWelcome from './components/IntroductionWelcome.tsx';\r\nimport IntroductionStructure from './components/IntroductionStructure.tsx';\r\nimport UserInfo from './components/UserInfo.tsx';\r\nimport QuestionForm from './components/QuestionForm.tsx';\r\nimport CompletionPage from './components/CompletionPage.tsx';\r\nimport SurveyExpired from './components/SurveyExpired.tsx';\r\nimport AIWarningModal from './components/AIWarningModal.tsx';\r\nimport './App.css';\r\n\r\ntype AppStage = 'consent' | 'declined' | 'welcome' | 'structure' | 'userInfo' | 'questions' | 'completed' | 'expired' | 'attentionFailed';\r\n\r\nfunction AppContent() {\r\n  const { state, createUserSession, loadUserSession } = useForm();\r\n  const [currentStage, setCurrentStage] = useState<AppStage>('consent');\r\n  const [isInitializing, setIsInitializing] = useState(true);\r\n  const [hasCheckedSession, setHasCheckedSession] = useState(false);\r\n  const [hasExistingSession, setHasExistingSession] = useState(false);\r\n  const [existingSessionId, setExistingSessionId] = useState<string | null>(null);\r\n  const [showAIWarning, setShowAIWarning] = useState(false); // NEW: Control modal visibility\r\n  const [pendingUserInfo, setPendingUserInfo] = useState<any>(null); // Store userInfo temporarily\r\n\r\n  // NEW: Check for attention check failure\r\n  useEffect(() => {\r\n    if (state.attentionCheckFailed) {\r\n      setCurrentStage('attentionFailed');\r\n    }\r\n  }, [state.attentionCheckFailed]);\r\n\r\n  // Wait for questions data to load\r\n  useEffect(() => {\r\n    if (state.questionsData.length > 0 && !hasCheckedSession && !state.isLoading) {\r\n      const checkExistingSession = async () => {\r\n        console.log('App: Checking for existing session...');\r\n        \r\n        // For one-sitting surveys, always clear old sessions\r\n        const savedSessionId = localStorage.getItem('culturalSurveySessionId');\r\n        const savedStartTime = localStorage.getItem('culturalSurveyStartTime');\r\n        \r\n        if (savedSessionId || savedStartTime) {\r\n          console.log('App: Clearing previous session (one-sitting requirement)');\r\n          localStorage.removeItem('culturalSurveySessionId');\r\n          localStorage.removeItem('culturalSurveyStartTime');\r\n          setHasExistingSession(false);\r\n        }\r\n        \r\n        setHasCheckedSession(true);\r\n        setIsInitializing(false);\r\n      };\r\n\r\n      checkExistingSession();\r\n    }\r\n  }, [state.questionsData.length, state.isLoading, hasCheckedSession]);\r\n\r\n  // Add this useEffect to handle page reloads\r\n  useEffect(() => {\r\n    const handleBeforeUnload = (e: BeforeUnloadEvent) => {\r\n      // Show warning if survey is in progress\r\n      if (state.sessionId && !state.isCompleted && !state.surveyExpired && !state.attentionCheckFailed) {\r\n        e.preventDefault();\r\n        e.returnValue = 'Your survey progress will be lost. Are you sure you want to leave?';\r\n        return 'Your survey progress will be lost. Are you sure you want to leave?';\r\n      }\r\n    };\r\n\r\n    const handleUnload = () => {\r\n      // Clear session data on page unload\r\n      if (state.sessionId && !state.isCompleted) {\r\n        localStorage.removeItem('culturalSurveySessionId');\r\n        localStorage.removeItem('culturalSurveyStartTime');\r\n      }\r\n    };\r\n\r\n    window.addEventListener('beforeunload', handleBeforeUnload);\r\n    window.addEventListener('unload', handleUnload);\r\n\r\n    return () => {\r\n      window.removeEventListener('beforeunload', handleBeforeUnload);\r\n      window.removeEventListener('unload', handleUnload);\r\n    };\r\n  }, [state.sessionId, state.isCompleted, state.surveyExpired, state.attentionCheckFailed]);\r\n\r\n  // Update stage based on form state\r\n  useEffect(() => {\r\n    if (!hasCheckedSession) return;\r\n    \r\n    if (state.attentionCheckFailed) {\r\n      setCurrentStage('attentionFailed');\r\n    } else if (state.surveyExpired) {\r\n      setCurrentStage('expired');\r\n    } else if (state.isCompleted) {\r\n      setCurrentStage('completed');\r\n    } else if (state.sessionId && state.userInfo && !showAIWarning) {\r\n      setCurrentStage('questions');\r\n    }\r\n  }, [state.attentionCheckFailed, state.surveyExpired, state.isCompleted, state.sessionId, state.userInfo, hasCheckedSession, showAIWarning]);\r\n\r\n  // Consent handlers\r\n  const handleConsent = () => {\r\n    setCurrentStage('welcome');\r\n  };\r\n\r\n  const handleDeclineConsent = () => {\r\n    setCurrentStage('declined');\r\n  };\r\n\r\n  const handleWelcomeContinue = () => {\r\n    setCurrentStage('structure');\r\n  };\r\n\r\n  const handleStartNewSurvey = () => {\r\n    if (hasExistingSession) {\r\n      localStorage.removeItem('culturalSurveySessionId');\r\n      localStorage.removeItem('culturalSurveyStartTime');\r\n      setHasExistingSession(false);\r\n      setExistingSessionId(null);\r\n    }\r\n    setCurrentStage('userInfo');\r\n  };\r\n\r\n  const handleResumeSurvey = async () => {\r\n    if (existingSessionId) {\r\n      try {\r\n        console.log('Resuming survey with session:', existingSessionId);\r\n        await loadUserSession(existingSessionId);\r\n        setCurrentStage('questions');\r\n      } catch (error) {\r\n        console.error('Failed to resume session:', error);\r\n        localStorage.removeItem('culturalSurveySessionId');\r\n        localStorage.removeItem('culturalSurveyStartTime');\r\n        setHasExistingSession(false);\r\n        setExistingSessionId(null);\r\n        alert('Unable to resume previous session. Starting fresh.');\r\n        setCurrentStage('userInfo');\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleUserInfoSubmit = async (userInfo: any) => {\r\n    // Store userInfo and show AI warning modal\r\n    setPendingUserInfo(userInfo);\r\n    setShowAIWarning(true);\r\n  };\r\n\r\n  const handleAIWarningAccept = async () => {\r\n    // Hide modal and create session\r\n    setShowAIWarning(false);\r\n    try {\r\n      await createUserSession(pendingUserInfo);\r\n      setCurrentStage('questions');\r\n    } catch (error) {\r\n      console.error('Failed to create user session:', error);\r\n    }\r\n  };\r\n\r\n  // Show consent form immediately, don't wait for initialization if on consent stage\r\n  if (currentStage === 'consent') {\r\n    return (\r\n      <ConsentForm \r\n        onConsent={handleConsent} \r\n        onDecline={handleDeclineConsent} \r\n      />\r\n    );\r\n  }\r\n\r\n  // Show declined page immediately\r\n  if (currentStage === 'declined') {\r\n    return <ConsentDeclined />;\r\n  }\r\n\r\n  if (isInitializing || state.questionsData.length === 0) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gray-100 flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4\"></div>\r\n          <p className=\"text-gray-600\">\r\n            {state.questionsData.length === 0 ? 'Loading survey questions...' : 'Checking for existing survey...'}\r\n          </p>\r\n          <p className=\"text-sm text-gray-500 mt-2\">\r\n            Questions loaded: {state.questionsData.length} categories\r\n          </p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (state.error) {\r\n    return (\r\n      <div className=\"min-h-screen bg-red-50 flex items-center justify-center p-4\">\r\n        <div className=\"max-w-md mx-auto bg-white rounded-lg shadow-lg p-6 text-center\">\r\n          <div className=\"text-red-600 text-4xl mb-4\">⚠️</div>\r\n          <h2 className=\"text-xl font-bold text-red-800 mb-2\">Error</h2>\r\n          <p className=\"text-red-600 mb-4\">{state.error}</p>\r\n          <button\r\n            onClick={() => window.location.reload()}\r\n            className=\"bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded\"\r\n          >\r\n            Reload Page\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (state.attentionCheckFailed) {\r\n    return <CompletionPage isAttentionCheckFailure={true} />;\r\n  }\r\n\r\n  switch (currentStage) {\r\n    case 'welcome':\r\n      return <IntroductionWelcome onContinue={handleWelcomeContinue} />;\r\n    case 'structure':\r\n      return (\r\n        <IntroductionStructure \r\n          onStartNew={handleStartNewSurvey}\r\n          onResume={handleResumeSurvey}\r\n          hasExistingSession={hasExistingSession}\r\n        />\r\n      );\r\n    case 'userInfo':\r\n      return (\r\n        <>\r\n          <UserInfo onSubmit={handleUserInfoSubmit} isLoading={state.isLoading} />\r\n          {showAIWarning && <AIWarningModal onAccept={handleAIWarningAccept} />}\r\n        </>\r\n      );\r\n    case 'questions':\r\n      return <QuestionForm />;\r\n    case 'completed':\r\n      return <CompletionPage />;\r\n    case 'attentionFailed':\r\n      return <CompletionPage isAttentionCheckFailure={true} />;\r\n    case 'expired':\r\n      return <SurveyExpired />;\r\n    default:\r\n      return (\r\n        <ConsentForm \r\n          onConsent={handleConsent} \r\n          onDecline={handleDeclineConsent} \r\n        />\r\n      );\r\n  }\r\n}\r\n\r\nfunction App() {\r\n  return (\r\n    <FormProvider>\r\n      <div className=\"App\">\r\n        <AppContent />\r\n      </div>\r\n    </FormProvider>\r\n  );\r\n}\r\n\r\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}