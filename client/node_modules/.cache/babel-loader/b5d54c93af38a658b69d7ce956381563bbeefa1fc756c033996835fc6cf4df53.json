{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\sangm\\\\OneDrive - Brock University\\\\CommonsenseForm\\\\client\\\\src\\\\components\\\\QuestionForm.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { useForm } from '../context/FormContext.tsx';\nimport { validateAnswer } from '../utils/helpers.ts';\nimport AttentionCheck from './AttentionCheck.tsx';\nimport ProgressBar from './ProgressBar.tsx';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function QuestionForm() {\n  _s();\n  const {\n    state,\n    saveResponse,\n    navigateToNext,\n    navigateToPrevious,\n    getCurrentQuestionData,\n    getTotalQuestionsInCurrentTopic,\n    getCompletedQuestionsInCurrentTopic,\n    resetSession\n  } = useForm();\n  const [answer, setAnswer] = useState('');\n  const [culturalCommonsense, setCulturalCommonsense] = useState(null);\n  const [errors, setErrors] = useState({});\n  const [isSaving, setIsSaving] = useState(false);\n  const [showAttentionCheck, setShowAttentionCheck] = useState(false);\n  const [attentionCheck, setAttentionCheck] = useState(null);\n  const [startTime, setStartTime] = useState(Date.now());\n  const [showSuccess, setShowSuccess] = useState(false);\n  const [lastQuestionId, setLastQuestionId] = useState(null);\n  const [isNavigating, setIsNavigating] = useState(false);\n  const [navigationDirection, setNavigationDirection] = useState(null);\n  const [showCelebration, setShowCelebration] = useState(null);\n  const [completedTopicName, setCompletedTopicName] = useState('');\n  const textareaRef = useRef(null);\n  const currentQuestionData = getCurrentQuestionData();\n\n  // Reset form when question changes\n  useEffect(() => {\n    if (currentQuestionData && currentQuestionData.questionId !== lastQuestionId) {\n      console.log('Question changed, loading data for:', currentQuestionData.questionId);\n\n      // Reset form state\n      setErrors({});\n      setShowSuccess(false);\n      setStartTime(Date.now());\n      setLastQuestionId(currentQuestionData.questionId);\n      setIsNavigating(false);\n      setNavigationDirection(null);\n\n      // Load existing response or reset\n      const existingResponse = state.responses.get(currentQuestionData.questionId);\n      if (existingResponse) {\n        console.log('Found existing response:', existingResponse);\n        setAnswer(existingResponse.answer);\n        setCulturalCommonsense(existingResponse.culturalCommonsense);\n      } else {\n        console.log('No existing response, clearing form');\n        setAnswer('');\n        setCulturalCommonsense(null);\n      }\n    }\n  }, [currentQuestionData === null || currentQuestionData === void 0 ? void 0 : currentQuestionData.questionId, lastQuestionId, state.responses]);\n  useEffect(() => {\n    if (textareaRef.current) {\n      textareaRef.current.style.height = 'auto';\n      textareaRef.current.style.height = textareaRef.current.scrollHeight + 'px';\n    }\n  }, [answer]);\n  const validateForm = () => {\n    const newErrors = {};\n    const answerValidation = validateAnswer(answer);\n    if (!answerValidation.isValid) {\n      newErrors.answer = answerValidation.message;\n    }\n    if (culturalCommonsense === null) {\n      newErrors.cultural = 'Please select whether this pertains to cultural commonsense';\n    }\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n  const handleAnswerChange = e => {\n    setAnswer(e.target.value);\n    if (errors.answer) {\n      setErrors(prev => ({\n        ...prev,\n        answer: undefined\n      }));\n    }\n  };\n  const handleCulturalChange = value => {\n    setCulturalCommonsense(value);\n    if (errors.cultural) {\n      setErrors(prev => ({\n        ...prev,\n        cultural: undefined\n      }));\n    }\n  };\n  const handleClear = () => {\n    setAnswer('');\n    setCulturalCommonsense(null);\n    setErrors({});\n    setShowSuccess(false);\n    if (textareaRef.current) {\n      textareaRef.current.focus();\n    }\n  };\n  const checkForMilestones = () => {\n    const {\n      categoryIndex,\n      subcategoryIndex,\n      topicIndex,\n      questionIndex\n    } = state.currentPosition;\n    const currentCategory = state.questionsData[categoryIndex];\n    const currentSubcategory = currentCategory === null || currentCategory === void 0 ? void 0 : currentCategory.subcategories[subcategoryIndex];\n    const currentTopic = currentSubcategory === null || currentSubcategory === void 0 ? void 0 : currentSubcategory.topics[topicIndex];\n    if (!currentTopic) return null;\n\n    // Store the current topic name for celebration\n    setCompletedTopicName(currentTopic.topic);\n\n    // Check if this is the last question in the topic\n    if (questionIndex === currentTopic.questions.length - 1) {\n      // Check if this is also the last topic in subcategory\n      if (topicIndex === currentSubcategory.topics.length - 1) {\n        // Check if this is also the last subcategory in category\n        if (subcategoryIndex === currentCategory.subcategories.length - 1) {\n          return {\n            type: 'category',\n            name: currentCategory.category,\n            subcategoryName: currentSubcategory.subcategory,\n            topicName: currentTopic.topic\n          };\n        }\n        return {\n          type: 'subcategory',\n          name: currentSubcategory.subcategory,\n          topicName: currentTopic.topic,\n          categoryName: currentCategory.category\n        };\n      }\n      return {\n        type: 'topic',\n        name: currentTopic.topic,\n        subcategoryName: currentSubcategory.subcategory,\n        categoryName: currentCategory.category\n      };\n    }\n    return null;\n  };\n  const handleSave = async () => {\n    if (!validateForm() || !currentQuestionData || !state.sessionId) return;\n    setIsSaving(true);\n    try {\n      const timeSpent = Math.floor((Date.now() - startTime) / 1000);\n      const response = {\n        sessionId: state.sessionId,\n        questionId: currentQuestionData.questionId,\n        categoryIndex: state.currentPosition.categoryIndex,\n        subcategoryIndex: state.currentPosition.subcategoryIndex,\n        topicIndex: state.currentPosition.topicIndex,\n        questionIndex: state.currentPosition.questionIndex,\n        category: currentQuestionData.category,\n        subcategory: currentQuestionData.subcategory,\n        topic: currentQuestionData.topic,\n        question: currentQuestionData.question,\n        answer: answer.trim(),\n        culturalCommonsense: culturalCommonsense,\n        timeSpent,\n        timestamp: new Date().toISOString()\n      };\n      await saveResponse(response);\n      setShowSuccess(true);\n      setTimeout(() => setShowSuccess(false), 2000);\n    } catch (error) {\n      console.error('SAVE ERROR:', error);\n      alert('Failed to save response: ' + error.message);\n    } finally {\n      setIsSaving(false);\n    }\n  };\n  const handleNext = async () => {\n    await handleSave();\n    if (Object.keys(errors).length === 0 && answer.trim() && culturalCommonsense !== null) {\n      // Check for milestone before navigating\n      const milestone = checkForMilestones();\n      setNavigationDirection('next');\n      setIsNavigating(true);\n      setTimeout(() => {\n        navigateToNext();\n\n        // Show celebration if milestone reached\n        if (milestone) {\n          setShowCelebration({\n            type: milestone.type,\n            data: milestone\n          });\n        }\n      }, 300);\n    }\n  };\n  const handlePrevious = () => {\n    setNavigationDirection('previous');\n    setIsNavigating(true);\n    setTimeout(() => {\n      navigateToPrevious();\n    }, 300);\n  };\n  const handleSkip = () => {\n    setAnswer('');\n    setCulturalCommonsense(null);\n    setErrors({});\n    setNavigationDirection('next');\n    setIsNavigating(true);\n    setTimeout(() => {\n      navigateToNext();\n    }, 300);\n  };\n  const closeCelebration = () => {\n    setShowCelebration(null);\n  };\n  if (showAttentionCheck && attentionCheck) {\n    return /*#__PURE__*/_jsxDEV(AttentionCheck, {\n      attentionCheck: attentionCheck,\n      onComplete: () => {}\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 12\n    }, this);\n  }\n  if (!currentQuestionData) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"min-h-screen bg-gray-100 flex items-center justify-center\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 242,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-600\",\n          children: \"Loading question...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 243,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 7\n    }, this);\n  }\n  const topicProgress = getTotalQuestionsInCurrentTopic();\n  const completedInTopic = getCompletedQuestionsInCurrentTopic();\n  const currentQuestionInTopic = state.currentPosition.questionIndex + 1;\n  const isFirstQuestion = state.currentPosition.categoryIndex === 0 && state.currentPosition.subcategoryIndex === 0 && state.currentPosition.topicIndex === 0 && state.currentPosition.questionIndex === 0;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50\",\n    children: [/*#__PURE__*/_jsxDEV(ProgressBar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 259,\n      columnNumber: 7\n    }, this), showCelebration && /*#__PURE__*/_jsxDEV(CelebrationModal, {\n      celebration: showCelebration,\n      onClose: closeCelebration\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 263,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-4xl mx-auto px-4 py-6\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"relative overflow-hidden\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `transform transition-all duration-500 ease-in-out ${isNavigating ? navigationDirection === 'next' ? '-translate-x-full opacity-0' : 'translate-x-full opacity-0' : 'translate-x-0 opacity-100'}`,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-white/70 backdrop-blur-sm rounded-2xl shadow-lg p-6 mb-6 border border-slate-200/50\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-center mb-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"inline-flex items-center px-4 py-2 bg-gradient-to-r from-slate-400 to-slate-500 text-white rounded-full text-sm font-medium mb-4 shadow-sm\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"mr-2\",\n                  children: \"\\uD83D\\uDCDD\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 284,\n                  columnNumber: 19\n                }, this), \"Question \", currentQuestionInTopic, \" of \", topicProgress]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 283,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n                className: \"text-2xl md:text-3xl font-semibold text-slate-700 mb-3\",\n                children: currentQuestionData.topic\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 288,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center justify-center space-x-2 text-sm\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"px-3 py-1 bg-blue-100/70 text-blue-700 rounded-full font-medium\",\n                  children: currentQuestionData.category\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 293,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-slate-400\",\n                  children: \"\\u2022\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 296,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"px-3 py-1 bg-green-100/70 text-green-700 rounded-full font-medium\",\n                  children: currentQuestionData.subcategory\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 297,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 292,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 282,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"relative\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-full bg-slate-200 rounded-full h-2 overflow-hidden\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"bg-gradient-to-r from-blue-300 to-indigo-400 h-2 rounded-full transition-all duration-1000 ease-out\",\n                  style: {\n                    width: `${completedInTopic / topicProgress * 100}%`\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 306,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 305,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-center text-sm text-slate-600 mt-2\",\n                children: [completedInTopic, \" of \", topicProgress, \" questions completed\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 312,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 304,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 281,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg border border-slate-200/50 overflow-hidden\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bg-gradient-to-r from-slate-400 to-slate-500 p-6 text-white\",\n              children: /*#__PURE__*/_jsxDEV(\"h2\", {\n                className: \"text-lg md:text-xl font-medium leading-relaxed\",\n                children: currentQuestionData.question\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 323,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 322,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"p-6\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mb-6\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex justify-between items-center mb-3\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    htmlFor: \"main-answer\",\n                    className: \"block text-base font-medium text-slate-700\",\n                    children: \"Your Answer *\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 332,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: handleClear,\n                    className: \"text-sm text-slate-500 hover:text-slate-700 font-medium hover:underline transition-colors\",\n                    children: \"Clear Form\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 335,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 331,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"relative\",\n                  children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n                    ref: textareaRef,\n                    id: \"main-answer\",\n                    value: answer,\n                    onChange: handleAnswerChange,\n                    placeholder: \"Share your knowledge about cultural practices in your region...\",\n                    className: `w-full px-4 py-3 border-2 rounded-xl focus:ring-2 focus:ring-slate-300 resize-none min-h-[120px] transition-all duration-200 text-slate-700 ${errors.answer ? 'border-red-300 focus:border-red-400' : 'border-slate-200 focus:border-slate-400'}`,\n                    maxLength: 5000,\n                    disabled: isSaving\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 344,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"absolute bottom-3 right-3 px-2 py-1 bg-slate-100 rounded-lg text-xs text-slate-500\",\n                    children: [answer.length, \"/5000\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 358,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 343,\n                  columnNumber: 19\n                }, this), errors.answer && /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-sm text-red-500 mt-2\",\n                  children: errors.answer\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 364,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 330,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mb-6 p-4 bg-gradient-to-r from-blue-50/50 to-indigo-50/50 rounded-xl border border-blue-100/50\",\n                children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                  className: \"font-medium text-slate-700 mb-3 text-base\",\n                  children: \"\\uD83E\\uDDE0 Cultural Commonsense Assessment\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 370,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-sm text-slate-600 mb-3 leading-relaxed\",\n                  children: \"Cultural commonsense refers to everyday beliefs, behaviors, values, and practices that are perceived as \\\"natural\\\" and widely shared within a cultural group.\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 373,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"font-medium text-slate-700 mb-3 text-sm\",\n                  children: \"Does this question pertain to cultural commonsense in your region? *\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 377,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"space-y-2\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center cursor-pointer p-3 rounded-lg hover:bg-white/60 transition-colors\",\n                    onClick: () => handleCulturalChange(true),\n                    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"radio\",\n                      id: \"cultural-yes\",\n                      checked: culturalCommonsense === true,\n                      onChange: () => handleCulturalChange(true),\n                      disabled: isSaving,\n                      className: \"h-4 w-4 text-slate-500 focus:ring-slate-300\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 386,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                      htmlFor: \"cultural-yes\",\n                      className: \"ml-3 text-slate-700 cursor-pointer text-sm\",\n                      children: \"\\u2705 Yes, this relates to cultural commonsense\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 394,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 382,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center cursor-pointer p-3 rounded-lg hover:bg-white/60 transition-colors\",\n                    onClick: () => handleCulturalChange(false),\n                    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"radio\",\n                      id: \"cultural-no\",\n                      checked: culturalCommonsense === false,\n                      onChange: () => handleCulturalChange(false),\n                      disabled: isSaving,\n                      className: \"h-4 w-4 text-slate-500 focus:ring-slate-300\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 403,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                      htmlFor: \"cultural-no\",\n                      className: \"ml-3 text-slate-700 cursor-pointer text-sm\",\n                      children: \"\\u274C No, this does not relate to cultural commonsense\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 411,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 399,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 381,\n                  columnNumber: 19\n                }, this), errors.cultural && /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-sm text-red-500 mt-2\",\n                  children: errors.cultural\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 418,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 369,\n                columnNumber: 17\n              }, this), showSuccess && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mb-4 p-3 bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200/50 rounded-xl animate-bounce-in\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-green-600 mr-2\",\n                    children: \"\\u2728\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 426,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-green-700 font-medium text-sm\",\n                    children: \"Response saved successfully!\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 427,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 425,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 424,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between items-center pt-4 border-t border-slate-200\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: handlePrevious,\n                  disabled: isFirstQuestion || isNavigating,\n                  className: \"flex items-center px-4 py-2 bg-slate-100 hover:bg-slate-200 disabled:bg-slate-50 disabled:text-slate-400 text-slate-600 font-medium rounded-xl transition-all duration-200 disabled:cursor-not-allowed text-sm\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"mr-2\",\n                    children: \"\\u2190\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 439,\n                    columnNumber: 21\n                  }, this), \"Previous\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 434,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex space-x-3\",\n                  children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: handleSkip,\n                    disabled: isNavigating,\n                    className: \"px-4 py-2 bg-gradient-to-r from-yellow-200 to-orange-200 hover:from-yellow-300 hover:to-orange-300 text-orange-700 font-medium rounded-xl transition-all duration-200 text-sm\",\n                    children: \"Skip\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 444,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: handleSave,\n                    disabled: isSaving || !answer.trim() || culturalCommonsense === null || isNavigating,\n                    className: \"px-4 py-2 bg-gradient-to-r from-blue-200 to-indigo-200 hover:from-blue-300 hover:to-indigo-300 disabled:from-slate-200 disabled:to-slate-300 text-slate-700 disabled:text-slate-500 font-medium rounded-xl transition-all duration-200 disabled:cursor-not-allowed text-sm\",\n                    children: isSaving ? 'Saving...' : 'Save'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 452,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: handleNext,\n                    disabled: isSaving || !answer.trim() || culturalCommonsense === null || isNavigating,\n                    className: \"flex items-center px-5 py-2 bg-gradient-to-r from-slate-300 to-slate-400 hover:from-slate-400 hover:to-slate-500 disabled:from-slate-200 disabled:to-slate-300 text-white disabled:text-slate-500 font-medium rounded-xl transition-all duration-200 disabled:cursor-not-allowed text-sm\",\n                    children: isNavigating ? 'Moving...' : /*#__PURE__*/_jsxDEV(_Fragment, {\n                      children: [\"Save & Continue\", /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"ml-2\",\n                        children: \"\\u2192\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 468,\n                        columnNumber: 27\n                      }, this)]\n                    }, void 0, true)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 460,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 443,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 433,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 329,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 319,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 269,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 258,\n    columnNumber: 5\n  }, this);\n}\n\n// Enhanced Celebration Modal Component\n_s(QuestionForm, \"Dw9babbna2VNc7R7fPifqCnkROI=\", false, function () {\n  return [useForm];\n});\n_c = QuestionForm;\nfunction CelebrationModal({\n  celebration,\n  onClose\n}) {\n  const celebrations = {\n    topic: {\n      icon: 'üéØ',\n      title: 'Topic Completed!',\n      emoji: 'üéäüåü‚ú®',\n      gradient: 'from-green-200 to-blue-200',\n      textColor: 'text-green-700'\n    },\n    subcategory: {\n      icon: 'üèÜ',\n      title: 'Subcategory Mastered!',\n      emoji: 'üéâüéäüåüüí´',\n      gradient: 'from-purple-200 to-pink-200',\n      textColor: 'text-purple-700'\n    },\n    category: {\n      icon: 'üëë',\n      title: 'Category Champion!',\n      emoji: 'üéâüéäüåüüí´‚ú®üéØ',\n      gradient: 'from-yellow-200 via-orange-200 to-red-200',\n      textColor: 'text-orange-700'\n    }\n  };\n  const config = celebrations[celebration.type];\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"fixed inset-0 bg-black/30 backdrop-blur-sm flex items-center justify-center z-50 animate-fade-in p-4\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white rounded-2xl p-6 max-w-lg mx-auto text-center shadow-2xl animate-bounce-in\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-5xl mb-3\",\n        children: config.icon\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 517,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        className: `text-2xl font-bold ${config.textColor} mb-3`,\n        children: config.title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 518,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `p-4 bg-gradient-to-r ${config.gradient} rounded-xl mb-4`,\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-slate-700 font-medium text-lg mb-2\",\n          children: [\"\\\"\", celebration.data.name, \"\\\"\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 522,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-slate-600 text-sm\",\n          children: [celebration.type === 'topic' && `in ${celebration.data.subcategoryName}`, celebration.type === 'subcategory' && `from ${celebration.data.categoryName}`, celebration.type === 'category' && 'Entire category completed!']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 525,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 521,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-3xl mb-4 animate-pulse\",\n        children: config.emoji\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 531,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: onClose,\n        className: \"px-6 py-2 bg-gradient-to-r from-slate-300 to-slate-400 hover:from-slate-400 hover:to-slate-500 text-white font-medium rounded-xl transition-all duration-200\",\n        children: \"Continue Survey\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 534,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 516,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 515,\n    columnNumber: 5\n  }, this);\n}\n_c2 = CelebrationModal;\nvar _c, _c2;\n$RefreshReg$(_c, \"QuestionForm\");\n$RefreshReg$(_c2, \"CelebrationModal\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useForm","validateAnswer","AttentionCheck","ProgressBar","jsxDEV","_jsxDEV","Fragment","_Fragment","QuestionForm","_s","state","saveResponse","navigateToNext","navigateToPrevious","getCurrentQuestionData","getTotalQuestionsInCurrentTopic","getCompletedQuestionsInCurrentTopic","resetSession","answer","setAnswer","culturalCommonsense","setCulturalCommonsense","errors","setErrors","isSaving","setIsSaving","showAttentionCheck","setShowAttentionCheck","attentionCheck","setAttentionCheck","startTime","setStartTime","Date","now","showSuccess","setShowSuccess","lastQuestionId","setLastQuestionId","isNavigating","setIsNavigating","navigationDirection","setNavigationDirection","showCelebration","setShowCelebration","completedTopicName","setCompletedTopicName","textareaRef","currentQuestionData","questionId","console","log","existingResponse","responses","get","current","style","height","scrollHeight","validateForm","newErrors","answerValidation","isValid","message","cultural","Object","keys","length","handleAnswerChange","e","target","value","prev","undefined","handleCulturalChange","handleClear","focus","checkForMilestones","categoryIndex","subcategoryIndex","topicIndex","questionIndex","currentPosition","currentCategory","questionsData","currentSubcategory","subcategories","currentTopic","topics","topic","questions","type","name","category","subcategoryName","subcategory","topicName","categoryName","handleSave","sessionId","timeSpent","Math","floor","response","question","trim","timestamp","toISOString","setTimeout","error","alert","handleNext","milestone","data","handlePrevious","handleSkip","closeCelebration","onComplete","fileName","_jsxFileName","lineNumber","columnNumber","className","children","topicProgress","completedInTopic","currentQuestionInTopic","isFirstQuestion","CelebrationModal","celebration","onClose","width","htmlFor","onClick","ref","id","onChange","placeholder","maxLength","disabled","checked","_c","celebrations","icon","title","emoji","gradient","textColor","config","_c2","$RefreshReg$"],"sources":["C:/Users/sangm/OneDrive - Brock University/CommonsenseForm/client/src/components/QuestionForm.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { useForm } from '../context/FormContext.tsx';\r\nimport { validateAnswer } from '../utils/helpers.ts';\r\nimport AttentionCheck from './AttentionCheck.tsx';\r\nimport ProgressBar from './ProgressBar.tsx';\r\n\r\nexport default function QuestionForm() {\r\n  const {\r\n    state,\r\n    saveResponse,\r\n    navigateToNext,\r\n    navigateToPrevious,\r\n    getCurrentQuestionData,\r\n    getTotalQuestionsInCurrentTopic,\r\n    getCompletedQuestionsInCurrentTopic,\r\n    resetSession\r\n  } = useForm();\r\n\r\n  const [answer, setAnswer] = useState('');\r\n  const [culturalCommonsense, setCulturalCommonsense] = useState<boolean | null>(null);\r\n  const [errors, setErrors] = useState<{ answer?: string; cultural?: string }>({});\r\n  const [isSaving, setIsSaving] = useState(false);\r\n  const [showAttentionCheck, setShowAttentionCheck] = useState(false);\r\n  const [attentionCheck, setAttentionCheck] = useState<any>(null);\r\n  const [startTime, setStartTime] = useState(Date.now());\r\n  const [showSuccess, setShowSuccess] = useState(false);\r\n  const [lastQuestionId, setLastQuestionId] = useState<string | null>(null);\r\n  const [isNavigating, setIsNavigating] = useState(false);\r\n  const [navigationDirection, setNavigationDirection] = useState<'next' | 'previous' | null>(null);\r\n  const [showCelebration, setShowCelebration] = useState<{type: string, data: any} | null>(null);\r\n  const [completedTopicName, setCompletedTopicName] = useState<string>('');\r\n  const textareaRef = useRef<HTMLTextAreaElement>(null);\r\n\r\n  const currentQuestionData = getCurrentQuestionData();\r\n\r\n  // Reset form when question changes\r\n  useEffect(() => {\r\n    if (currentQuestionData && currentQuestionData.questionId !== lastQuestionId) {\r\n      console.log('Question changed, loading data for:', currentQuestionData.questionId);\r\n      \r\n      // Reset form state\r\n      setErrors({});\r\n      setShowSuccess(false);\r\n      setStartTime(Date.now());\r\n      setLastQuestionId(currentQuestionData.questionId);\r\n      setIsNavigating(false);\r\n      setNavigationDirection(null);\r\n      \r\n      // Load existing response or reset\r\n      const existingResponse = state.responses.get(currentQuestionData.questionId);\r\n      if (existingResponse) {\r\n        console.log('Found existing response:', existingResponse);\r\n        setAnswer(existingResponse.answer);\r\n        setCulturalCommonsense(existingResponse.culturalCommonsense);\r\n      } else {\r\n        console.log('No existing response, clearing form');\r\n        setAnswer('');\r\n        setCulturalCommonsense(null);\r\n      }\r\n    }\r\n  }, [currentQuestionData?.questionId, lastQuestionId, state.responses]);\r\n\r\n  useEffect(() => {\r\n    if (textareaRef.current) {\r\n      textareaRef.current.style.height = 'auto';\r\n      textareaRef.current.style.height = textareaRef.current.scrollHeight + 'px';\r\n    }\r\n  }, [answer]);\r\n\r\n  const validateForm = () => {\r\n    const newErrors: { answer?: string; cultural?: string } = {};\r\n    \r\n    const answerValidation = validateAnswer(answer);\r\n    if (!answerValidation.isValid) {\r\n      newErrors.answer = answerValidation.message;\r\n    }\r\n\r\n    if (culturalCommonsense === null) {\r\n      newErrors.cultural = 'Please select whether this pertains to cultural commonsense';\r\n    }\r\n\r\n    setErrors(newErrors);\r\n    return Object.keys(newErrors).length === 0;\r\n  };\r\n\r\n  const handleAnswerChange = (e: React.ChangeEvent<HTMLTextAreaElement>) => {\r\n    setAnswer(e.target.value);\r\n    if (errors.answer) {\r\n      setErrors(prev => ({ ...prev, answer: undefined }));\r\n    }\r\n  };\r\n\r\n  const handleCulturalChange = (value: boolean) => {\r\n    setCulturalCommonsense(value);\r\n    if (errors.cultural) {\r\n      setErrors(prev => ({ ...prev, cultural: undefined }));\r\n    }\r\n  };\r\n\r\n  const handleClear = () => {\r\n    setAnswer('');\r\n    setCulturalCommonsense(null);\r\n    setErrors({});\r\n    setShowSuccess(false);\r\n    if (textareaRef.current) {\r\n      textareaRef.current.focus();\r\n    }\r\n  };\r\n\r\n  const checkForMilestones = () => {\r\n    const { categoryIndex, subcategoryIndex, topicIndex, questionIndex } = state.currentPosition;\r\n    const currentCategory = state.questionsData[categoryIndex];\r\n    const currentSubcategory = currentCategory?.subcategories[subcategoryIndex];\r\n    const currentTopic = currentSubcategory?.topics[topicIndex];\r\n    \r\n    if (!currentTopic) return null;\r\n\r\n    // Store the current topic name for celebration\r\n    setCompletedTopicName(currentTopic.topic);\r\n\r\n    // Check if this is the last question in the topic\r\n    if (questionIndex === currentTopic.questions.length - 1) {\r\n      // Check if this is also the last topic in subcategory\r\n      if (topicIndex === currentSubcategory.topics.length - 1) {\r\n        // Check if this is also the last subcategory in category\r\n        if (subcategoryIndex === currentCategory.subcategories.length - 1) {\r\n          return {\r\n            type: 'category',\r\n            name: currentCategory.category,\r\n            subcategoryName: currentSubcategory.subcategory,\r\n            topicName: currentTopic.topic\r\n          };\r\n        }\r\n        return {\r\n          type: 'subcategory',\r\n          name: currentSubcategory.subcategory,\r\n          topicName: currentTopic.topic,\r\n          categoryName: currentCategory.category\r\n        };\r\n      }\r\n      return {\r\n        type: 'topic',\r\n        name: currentTopic.topic,\r\n        subcategoryName: currentSubcategory.subcategory,\r\n        categoryName: currentCategory.category\r\n      };\r\n    }\r\n    return null;\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    if (!validateForm() || !currentQuestionData || !state.sessionId) return;\r\n\r\n    setIsSaving(true);\r\n    \r\n    try {\r\n      const timeSpent = Math.floor((Date.now() - startTime) / 1000);\r\n      \r\n      const response = {\r\n        sessionId: state.sessionId,\r\n        questionId: currentQuestionData.questionId,\r\n        categoryIndex: state.currentPosition.categoryIndex,\r\n        subcategoryIndex: state.currentPosition.subcategoryIndex,\r\n        topicIndex: state.currentPosition.topicIndex,\r\n        questionIndex: state.currentPosition.questionIndex,\r\n        category: currentQuestionData.category,\r\n        subcategory: currentQuestionData.subcategory,\r\n        topic: currentQuestionData.topic,\r\n        question: currentQuestionData.question,\r\n        answer: answer.trim(),\r\n        culturalCommonsense: culturalCommonsense!,\r\n        timeSpent,\r\n        timestamp: new Date().toISOString()\r\n      };\r\n\r\n      await saveResponse(response);\r\n      setShowSuccess(true);\r\n      setTimeout(() => setShowSuccess(false), 2000);\r\n      \r\n    } catch (error) {\r\n      console.error('SAVE ERROR:', error);\r\n      alert('Failed to save response: ' + (error as Error).message);\r\n    } finally {\r\n      setIsSaving(false);\r\n    }\r\n  };\r\n\r\n  const handleNext = async () => {\r\n    await handleSave();\r\n    if (Object.keys(errors).length === 0 && answer.trim() && culturalCommonsense !== null) {\r\n      // Check for milestone before navigating\r\n      const milestone = checkForMilestones();\r\n      \r\n      setNavigationDirection('next');\r\n      setIsNavigating(true);\r\n      \r\n      setTimeout(() => {\r\n        navigateToNext();\r\n        \r\n        // Show celebration if milestone reached\r\n        if (milestone) {\r\n          setShowCelebration({type: milestone.type, data: milestone});\r\n        }\r\n      }, 300);\r\n    }\r\n  };\r\n\r\n  const handlePrevious = () => {\r\n    setNavigationDirection('previous');\r\n    setIsNavigating(true);\r\n    \r\n    setTimeout(() => {\r\n      navigateToPrevious();\r\n    }, 300);\r\n  };\r\n\r\n  const handleSkip = () => {\r\n    setAnswer('');\r\n    setCulturalCommonsense(null);\r\n    setErrors({});\r\n    \r\n    setNavigationDirection('next');\r\n    setIsNavigating(true);\r\n    \r\n    setTimeout(() => {\r\n      navigateToNext();\r\n    }, 300);\r\n  };\r\n\r\n  const closeCelebration = () => {\r\n    setShowCelebration(null);\r\n  };\r\n\r\n  if (showAttentionCheck && attentionCheck) {\r\n    return <AttentionCheck attentionCheck={attentionCheck} onComplete={() => {}} />;\r\n  }\r\n\r\n  if (!currentQuestionData) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gray-100 flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4\"></div>\r\n          <p className=\"text-gray-600\">Loading question...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const topicProgress = getTotalQuestionsInCurrentTopic();\r\n  const completedInTopic = getCompletedQuestionsInCurrentTopic();\r\n  const currentQuestionInTopic = state.currentPosition.questionIndex + 1;\r\n  const isFirstQuestion = state.currentPosition.categoryIndex === 0 && \r\n                         state.currentPosition.subcategoryIndex === 0 && \r\n                         state.currentPosition.topicIndex === 0 && \r\n                         state.currentPosition.questionIndex === 0;\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50\">\r\n      <ProgressBar />\r\n      \r\n      {/* Celebration Modal */}\r\n      {showCelebration && (\r\n        <CelebrationModal \r\n          celebration={showCelebration} \r\n          onClose={closeCelebration}\r\n        />\r\n      )}\r\n      \r\n      <div className=\"max-w-4xl mx-auto px-4 py-6\">\r\n        {/* Question Card Container */}\r\n        <div className=\"relative overflow-hidden\">\r\n          <div className={`transform transition-all duration-500 ease-in-out ${\r\n            isNavigating \r\n              ? navigationDirection === 'next' \r\n                ? '-translate-x-full opacity-0'\r\n                : 'translate-x-full opacity-0'\r\n              : 'translate-x-0 opacity-100'\r\n          }`}>\r\n            \r\n            {/* Topic Header Card */}\r\n            <div className=\"bg-white/70 backdrop-blur-sm rounded-2xl shadow-lg p-6 mb-6 border border-slate-200/50\">\r\n              <div className=\"text-center mb-4\">\r\n                <div className=\"inline-flex items-center px-4 py-2 bg-gradient-to-r from-slate-400 to-slate-500 text-white rounded-full text-sm font-medium mb-4 shadow-sm\">\r\n                  <span className=\"mr-2\">üìù</span>\r\n                  Question {currentQuestionInTopic} of {topicProgress}\r\n                </div>\r\n                \r\n                <h1 className=\"text-2xl md:text-3xl font-semibold text-slate-700 mb-3\">\r\n                  {currentQuestionData.topic}\r\n                </h1>\r\n                \r\n                <div className=\"flex items-center justify-center space-x-2 text-sm\">\r\n                  <span className=\"px-3 py-1 bg-blue-100/70 text-blue-700 rounded-full font-medium\">\r\n                    {currentQuestionData.category}\r\n                  </span>\r\n                  <span className=\"text-slate-400\">‚Ä¢</span>\r\n                  <span className=\"px-3 py-1 bg-green-100/70 text-green-700 rounded-full font-medium\">\r\n                    {currentQuestionData.subcategory}\r\n                  </span>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Topic Progress Bar */}\r\n              <div className=\"relative\">\r\n                <div className=\"w-full bg-slate-200 rounded-full h-2 overflow-hidden\">\r\n                  <div \r\n                    className=\"bg-gradient-to-r from-blue-300 to-indigo-400 h-2 rounded-full transition-all duration-1000 ease-out\"\r\n                    style={{ width: `${(completedInTopic / topicProgress) * 100}%` }}\r\n                  ></div>\r\n                </div>\r\n                \r\n                <div className=\"text-center text-sm text-slate-600 mt-2\">\r\n                  {completedInTopic} of {topicProgress} questions completed\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Main Question Card */}\r\n            <div className=\"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg border border-slate-200/50 overflow-hidden\">\r\n              \r\n              {/* Question Header */}\r\n              <div className=\"bg-gradient-to-r from-slate-400 to-slate-500 p-6 text-white\">\r\n                <h2 className=\"text-lg md:text-xl font-medium leading-relaxed\">\r\n                  {currentQuestionData.question}\r\n                </h2>\r\n              </div>\r\n\r\n              {/* Answer Section */}\r\n              <div className=\"p-6\">\r\n                <div className=\"mb-6\">\r\n                  <div className=\"flex justify-between items-center mb-3\">\r\n                    <label htmlFor=\"main-answer\" className=\"block text-base font-medium text-slate-700\">\r\n                      Your Answer *\r\n                    </label>\r\n                    <button\r\n                      onClick={handleClear}\r\n                      className=\"text-sm text-slate-500 hover:text-slate-700 font-medium hover:underline transition-colors\"\r\n                    >\r\n                      Clear Form\r\n                    </button>\r\n                  </div>\r\n                  \r\n                  <div className=\"relative\">\r\n                    <textarea\r\n                      ref={textareaRef}\r\n                      id=\"main-answer\"\r\n                      value={answer}\r\n                      onChange={handleAnswerChange}\r\n                      placeholder=\"Share your knowledge about cultural practices in your region...\"\r\n                      className={`w-full px-4 py-3 border-2 rounded-xl focus:ring-2 focus:ring-slate-300 resize-none min-h-[120px] transition-all duration-200 text-slate-700 ${\r\n                        errors.answer ? 'border-red-300 focus:border-red-400' : 'border-slate-200 focus:border-slate-400'\r\n                      }`}\r\n                      maxLength={5000}\r\n                      disabled={isSaving}\r\n                    />\r\n                    \r\n                    {/* Character count badge */}\r\n                    <div className=\"absolute bottom-3 right-3 px-2 py-1 bg-slate-100 rounded-lg text-xs text-slate-500\">\r\n                      {answer.length}/5000\r\n                    </div>\r\n                  </div>\r\n                  \r\n                  {errors.answer && (\r\n                    <p className=\"text-sm text-red-500 mt-2\">{errors.answer}</p>\r\n                  )}\r\n                </div>\r\n\r\n                {/* Cultural Commonsense Section */}\r\n                <div className=\"mb-6 p-4 bg-gradient-to-r from-blue-50/50 to-indigo-50/50 rounded-xl border border-blue-100/50\">\r\n                  <h3 className=\"font-medium text-slate-700 mb-3 text-base\">\r\n                    üß† Cultural Commonsense Assessment\r\n                  </h3>\r\n                  <p className=\"text-sm text-slate-600 mb-3 leading-relaxed\">\r\n                    Cultural commonsense refers to everyday beliefs, behaviors, values, and practices \r\n                    that are perceived as \"natural\" and widely shared within a cultural group.\r\n                  </p>\r\n                  <p className=\"font-medium text-slate-700 mb-3 text-sm\">\r\n                    Does this question pertain to cultural commonsense in your region? *\r\n                  </p>\r\n                  \r\n                  <div className=\"space-y-2\">\r\n                    <div \r\n                      className=\"flex items-center cursor-pointer p-3 rounded-lg hover:bg-white/60 transition-colors\"\r\n                      onClick={() => handleCulturalChange(true)}\r\n                    >\r\n                      <input\r\n                        type=\"radio\"\r\n                        id=\"cultural-yes\"\r\n                        checked={culturalCommonsense === true}\r\n                        onChange={() => handleCulturalChange(true)}\r\n                        disabled={isSaving}\r\n                        className=\"h-4 w-4 text-slate-500 focus:ring-slate-300\"\r\n                      />\r\n                      <label htmlFor=\"cultural-yes\" className=\"ml-3 text-slate-700 cursor-pointer text-sm\">\r\n                        ‚úÖ Yes, this relates to cultural commonsense\r\n                      </label>\r\n                    </div>\r\n                    \r\n                    <div \r\n                      className=\"flex items-center cursor-pointer p-3 rounded-lg hover:bg-white/60 transition-colors\"\r\n                      onClick={() => handleCulturalChange(false)}\r\n                    >\r\n                      <input\r\n                        type=\"radio\"\r\n                        id=\"cultural-no\"\r\n                        checked={culturalCommonsense === false}\r\n                        onChange={() => handleCulturalChange(false)}\r\n                        disabled={isSaving}\r\n                        className=\"h-4 w-4 text-slate-500 focus:ring-slate-300\"\r\n                      />\r\n                      <label htmlFor=\"cultural-no\" className=\"ml-3 text-slate-700 cursor-pointer text-sm\">\r\n                        ‚ùå No, this does not relate to cultural commonsense\r\n                      </label>\r\n                    </div>\r\n                  </div>\r\n                  \r\n                  {errors.cultural && (\r\n                    <p className=\"text-sm text-red-500 mt-2\">{errors.cultural}</p>\r\n                  )}\r\n                </div>\r\n\r\n                {/* Success Message */}\r\n                {showSuccess && (\r\n                  <div className=\"mb-4 p-3 bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200/50 rounded-xl animate-bounce-in\">\r\n                    <div className=\"flex items-center\">\r\n                      <span className=\"text-green-600 mr-2\">‚ú®</span>\r\n                      <span className=\"text-green-700 font-medium text-sm\">Response saved successfully!</span>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n\r\n                {/* Navigation Buttons */}\r\n                <div className=\"flex justify-between items-center pt-4 border-t border-slate-200\">\r\n                  <button\r\n                    onClick={handlePrevious}\r\n                    disabled={isFirstQuestion || isNavigating}\r\n                    className=\"flex items-center px-4 py-2 bg-slate-100 hover:bg-slate-200 disabled:bg-slate-50 disabled:text-slate-400 text-slate-600 font-medium rounded-xl transition-all duration-200 disabled:cursor-not-allowed text-sm\"\r\n                  >\r\n                    <span className=\"mr-2\">‚Üê</span>\r\n                    Previous\r\n                  </button>\r\n\r\n                  <div className=\"flex space-x-3\">\r\n                    <button\r\n                      onClick={handleSkip}\r\n                      disabled={isNavigating}\r\n                      className=\"px-4 py-2 bg-gradient-to-r from-yellow-200 to-orange-200 hover:from-yellow-300 hover:to-orange-300 text-orange-700 font-medium rounded-xl transition-all duration-200 text-sm\"\r\n                    >\r\n                      Skip\r\n                    </button>\r\n\r\n                    <button\r\n                      onClick={handleSave}\r\n                      disabled={isSaving || !answer.trim() || culturalCommonsense === null || isNavigating}\r\n                      className=\"px-4 py-2 bg-gradient-to-r from-blue-200 to-indigo-200 hover:from-blue-300 hover:to-indigo-300 disabled:from-slate-200 disabled:to-slate-300 text-slate-700 disabled:text-slate-500 font-medium rounded-xl transition-all duration-200 disabled:cursor-not-allowed text-sm\"\r\n                    >\r\n                      {isSaving ? 'Saving...' : 'Save'}\r\n                    </button>\r\n\r\n                    <button\r\n                      onClick={handleNext}\r\n                      disabled={isSaving || !answer.trim() || culturalCommonsense === null || isNavigating}\r\n                      className=\"flex items-center px-5 py-2 bg-gradient-to-r from-slate-300 to-slate-400 hover:from-slate-400 hover:to-slate-500 disabled:from-slate-200 disabled:to-slate-300 text-white disabled:text-slate-500 font-medium rounded-xl transition-all duration-200 disabled:cursor-not-allowed text-sm\"\r\n                    >\r\n                      {isNavigating ? 'Moving...' : (\r\n                        <>\r\n                          Save & Continue\r\n                          <span className=\"ml-2\">‚Üí</span>\r\n                        </>\r\n                      )}\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// Enhanced Celebration Modal Component\r\nfunction CelebrationModal({ celebration, onClose }: { \r\n  celebration: {type: string, data: any}, \r\n  onClose: () => void \r\n}) {\r\n  const celebrations = {\r\n    topic: {\r\n      icon: 'üéØ',\r\n      title: 'Topic Completed!',\r\n      emoji: 'üéäüåü‚ú®',\r\n      gradient: 'from-green-200 to-blue-200',\r\n      textColor: 'text-green-700'\r\n    },\r\n    subcategory: {\r\n      icon: 'üèÜ',\r\n      title: 'Subcategory Mastered!',\r\n      emoji: 'üéâüéäüåüüí´',\r\n      gradient: 'from-purple-200 to-pink-200',\r\n      textColor: 'text-purple-700'\r\n    },\r\n    category: {\r\n      icon: 'üëë',\r\n      title: 'Category Champion!',\r\n      emoji: 'üéâüéäüåüüí´‚ú®üéØ',\r\n      gradient: 'from-yellow-200 via-orange-200 to-red-200',\r\n      textColor: 'text-orange-700'\r\n    }\r\n  };\r\n\r\n  const config = celebrations[celebration.type as keyof typeof celebrations];\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black/30 backdrop-blur-sm flex items-center justify-center z-50 animate-fade-in p-4\">\r\n      <div className=\"bg-white rounded-2xl p-6 max-w-lg mx-auto text-center shadow-2xl animate-bounce-in\">\r\n        <div className=\"text-5xl mb-3\">{config.icon}</div>\r\n        <h2 className={`text-2xl font-bold ${config.textColor} mb-3`}>\r\n          {config.title}\r\n        </h2>\r\n        <div className={`p-4 bg-gradient-to-r ${config.gradient} rounded-xl mb-4`}>\r\n          <p className=\"text-slate-700 font-medium text-lg mb-2\">\r\n            \"{celebration.data.name}\"\r\n          </p>\r\n          <p className=\"text-slate-600 text-sm\">\r\n            {celebration.type === 'topic' && `in ${celebration.data.subcategoryName}`}\r\n            {celebration.type === 'subcategory' && `from ${celebration.data.categoryName}`}\r\n            {celebration.type === 'category' && 'Entire category completed!'}\r\n          </p>\r\n        </div>\r\n        <div className=\"text-3xl mb-4 animate-pulse\">\r\n          {config.emoji}\r\n        </div>\r\n        <button\r\n          onClick={onClose}\r\n          className=\"px-6 py-2 bg-gradient-to-r from-slate-300 to-slate-400 hover:from-slate-400 hover:to-slate-500 text-white font-medium rounded-xl transition-all duration-200\"\r\n        >\r\n          Continue Survey\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}